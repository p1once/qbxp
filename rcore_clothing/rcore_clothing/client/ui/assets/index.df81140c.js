import{c as Cr}from"./@react-dom.a447d371.js";import{r as c,j as e,t as kr,k as Sr,R as He,m as i,n as Ct,F as Ir,u as Er,C as Mr,z as W,p as kt,q as St,v as ae,w as Ut,V as Gt}from"./vendor.1b71156c.js";import{L as Or,C as $r,a as Ee,X as Oe,P as ze,b as qt,c as Ar,S as Yt,d as Jt,F as Dr,B as Wt,e as It,I as Pr,f as Qt,Z as Tr,V as Rr,g as Xt,h as Kt,i as Zt,j as Me,k as es,T as Ve,E as ts,l as jr,m as Fr,n as zr,o as Br,p as Lr,U as ss,q as rs,r as as,H as Hr,s as Vr,t as Ur,u as Gr,A as qr,v as Yr,w as Jr,x as Wr}from"./@lucide-react.68c80df4.js";import{$ as ns,a as Qr,b as os,c as is,d as ls,e as Xr,f as cs,g as ds,h as Kr,i as Zr,j as ea,k as ms,l as ta,m as us,n as ps,o as sa,p as fs,q as ra,r as hs,s as gs,t as aa,u as na,v as bs,w as oa,x as ia,y as la,z as xs,A as ca,B as da,C as ma,D as vs,E as ua,F as pa,G as fa,H as ys,I as ha,J as ga,K as ba,L as Ns,M as ws,N as xa,O as Rt,P as _s,Q as Cs,R as ks,S as Ss,T as Is,U as Es,V as va}from"./@radix-ui.b560de28.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const et=()=>!window.invokeNative,ya=()=>{},Q=(t,r)=>{const s=c.exports.useRef(ya);c.exports.useEffect(()=>{s.current=r},[r]),c.exports.useEffect(()=>{const a=n=>{const{action:o,data:l}=n.data;s.current&&o===t&&s.current(l)};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[t])};async function Na(){const r=await(await fetch("config.js")).text(),s=new Blob([r],{type:"text/javascript"}),a=URL.createObjectURL(s),n=document.createElement("script");return n.src=a,new Promise(o=>{n.onload=()=>{URL.revokeObjectURL(a),o(window.appConfig)},document.head.appendChild(n)})}async function w(t,r,s){const a={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(r)};if(et())return s||{};const n=window.GetParentResourceName?window.GetParentResourceName():"rcore_clothing",l=await(await fetch(`https://${n}/${t}`,a)).json();if(l===null)throw new Error("Failed to fetch data from NUI");return l}const Ms=c.exports.createContext({}),wa=({children:t})=>{const[r,s]=c.exports.useState(!1),[a,n]=c.exports.useState(!1),[o,l]=c.exports.useState({}),[d,m]=c.exports.useState(),[u,p]=c.exports.useState([]),[g,v]=c.exports.useState(!1),[b,f]=c.exports.useState({}),[h,S]=c.exports.useState({}),[k,x]=c.exports.useState(!1),[_,j]=c.exports.useState(!1),[I,D]=c.exports.useState(!1),[F,z]=c.exports.useState(!1),[C,A]=c.exports.useState(!1),[G,R]=c.exports.useState(!1),[X,K]=c.exports.useState(null),[se,re]=c.exports.useState(!1),[y,P]=c.exports.useState({}),[$,te]=c.exports.useState([]),[M,B]=c.exports.useState(null),[O,q]=c.exports.useState(null),[U,L]=c.exports.useState({}),[ee,ue]=c.exports.useState([]),[le,De]=c.exports.useState({}),[Ye,ct]=c.exports.useState(!1),[Pe,Je]=c.exports.useState({face:{},headOverlay:[],headblend:[],hairColor:[0,0],eyeColor:void 0,pedModel:1885233650,components:[],props:[]}),[ke,dt]=c.exports.useState({face:{},headOverlay:[],headblend:[],hairColor:[0,0],eyeColor:void 0,pedModel:1885233650,components:[],props:[]});return e(Ms.Provider,{value:{isLoading:r,translations:o,userConfig:d,setUserConfig:m,setTranslations:l,setIsLoading:s,menuData:u,setMenuData:p,isAdminMode:g,setIsAdminMode:v,isArmEditing:C,setIsArmEditing:A,shopData:b,setShopData:f,permissions:h,setPermissions:S,isGroupByDrawable:F,setIsGroupByDrawable:z,isNumeralMode:se,setIsNumeralMode:re,isStockManagement:k,setIsStockManagement:x,isEditMetaData:_,setIsEditMetaData:j,menuFirstLevelSelected:M,setMenuFirstLevelSelected:B,menuSecondLevelSelected:O,setMenuSecondLevelSelected:q,clothingCategories:y,setClothingCategories:P,hairData:$,setHairData:te,isCheckoutLoading:a,setIsCheckoutLoading:n,initPedData:Pe,setInitPedData:Je,serverJobs:U,setServerJobs:L,isOutfitEditor:I,setIsOutfitEditor:D,currentPedData:ke,setCurrentPedData:dt,isImageDebugging:G,setIsImageDebugging:R,previewedItem:X,setPreviewedItem:K,availableArms:ee,setAvailableArms:ue,charFeaturesPrices:le,setCharFeaturesPrices:De,isIdModeOpenByDefault:Ye,setIsIdModeOpenByDefault:ct},children:t})},J=()=>{const t=c.exports.useContext(Ms);if(!t)throw new Error("useAppContext must be used within a ContextProvider");return t};var de=(t=>(t.ClothingItem="clothing_item",t.Color="color",t.Color2="color_2",t.Headblend="headblend",t.Number="number",t.Number2="number_2",t.Size="size",t.FaceFeatureSlider="face_feature_slider",t.TypeEyeColor="type_eye_color",t.Category="category",t.Outfits="outfits",t.PedSelect="ped_select",t.Paragraph="paragraph",t))(de||{}),Y=(t=>(t.Clothing="clothing",t.Headblend="headblend",t.FaceFeatures="face_features",t.Hair="hair",t.HeadOverlay="head_overlay",t.EyeColor="eye_color",t.MyOutfits="my_outfits",t.GlobalOutfits="global_outfits",t.PedSelect="ped_select",t))(Y||{}),xt=(t=>(t.Clothing="clothing",t.Head="head",t.Outfits="outfits",t))(xt||{}),ne=(t=>(t.NAV_UP_DOWN="NAV_UP_DOWN",t.BACK="BACK",t.SELECT="SELECT",t.PURCHASE="PURCHASE",t.QUIT="QUIT",t.PURCHASE_FAIL="PURCHASE_FAIL",t.CLEAR_CART="CLEAR_CART",t.SLIDER_CHANGE="SLIDER_CHANGE",t.REMOVE_FROM_CART="REMOVE_FROM_CART",t.QUIT_UI="QUIT_UI",t.PREVIEW_ITEM_1="PREVIEW_ITEM_1",t.PREVIEW_ITEM_FESTIVE="PREVIEW_ITEM_FESTIVE",t))(ne||{});const oe=t=>{w("playSound",t)},ot=[1885233650,-1667301416],Re=t=>{w("previewItem",{item:t})},Ue=t=>{w("resetKeepCart",{items:t})},vt=t=>{w("resetComponents",{componentIds:t})},_a=()=>{w("resetAllComponents")},Os=c.exports.createContext({}),Ca=({children:t})=>{const[r,s]=c.exports.useState([]),a=c.exports.useMemo(()=>r.reduce((m,u)=>m+(u.price||0),0),[r]),n=c.exports.useCallback(m=>r.some(u=>u.id===m),[r]),o=c.exports.useCallback(m=>{if(n(m.id))return;const u=r.findIndex(p=>p.component_id===m.component_id);if(u!==-1){s(p=>{const g=[...p];return g[u]=m,g});return}s(p=>[...p,m])},[r,n,s]),l=c.exports.useCallback(m=>{s(u=>u.filter(p=>p.id!==m)),oe(ne.REMOVE_FROM_CART)},[s]),d=c.exports.useCallback(m=>{s([]),_a(),m||oe(ne.CLEAR_CART)},[s]);return e(Os.Provider,{value:{items:r,addItem:o,removeItem:l,clearCart:d,isItemInCart:n,totalPrice:a},children:t})},me=()=>{const t=c.exports.useContext(Os);if(!t)throw new Error("useCartContext must be used within a CartContextProvider");return t},Ge=()=>{const{setIsAdminMode:t,isAdminMode:r,setIsStockManagement:s,setMenuFirstLevelSelected:a,setMenuSecondLevelSelected:n,setIsEditMetaData:o,isStockManagement:l,isEditMetaData:d,shopData:m,isOutfitEditor:u,setIsOutfitEditor:p,setIsNumeralMode:g,isGroupByDrawable:v,setIsGroupByDrawable:b,isArmEditing:f,setIsArmEditing:h,setIsImageDebugging:S,isImageDebugging:k}=J(),{clearCart:x}=me(),[_,j]=c.exports.useState(!1),I=m==null?void 0:m.type,D=R=>{(l||v)&&(l&&w("refreshMenuData",{shopType:I}),a(null),n(null)),x(!0),t(!1),s(!1),o(!1),p(!1),j(!1),g(R!==void 0?R:!1),b(!1),h(!1),G(!1)},F=()=>{D(),t(!r)},z=R=>{a(null),n(null),R?w("requestCompleteMenuData"):w("refreshMenuData",{shopType:I}),u&&A(!1),v&&C(!1),f&&h(!1),s(R)},C=R=>{a(null),n(null),b(R)},A=R=>{a(null),n(null),p(R),j(!1),x(!0),l&&z(!1),R?w("requestCompleteMenuData"):w("refreshMenuData",{shopType:I})},G=R=>{S(R),w("setImageDebugMode",R),R||w("zoomOutCamera")};return{toggleAdminMode:F,isAdminMode:r,resetAdminMode:D,isStockManagement:l,isEditMetaData:d,setIsEditMetaData:o,setIsStockManagement:z,isOutfitEditor:u,setIsOutfitEditor:A,isOutfitDialogOpen:_,setIsOutfitDialogOpen:j,isGroupByDrawable:v,setIsGroupByDrawable:C,isArmEditing:f,setIsArmEditing:h,isImageDebugging:k,setIsImageDebugging:G}},ka=t=>t===Y.Clothing,Sa=t=>{switch(t){case Y.EyeColor:case Y.FaceFeatures:case Y.Hair:case Y.HeadOverlay:case Y.Headblend:case Y.PedSelect:return!0;default:return!1}},$s=t=>t===Y.MyOutfits||t===Y.GlobalOutfits,Ia=t=>t.type===de.FaceFeatureSlider,Ea=t=>t.type===de.PedSelect,Ma=t=>t.type===de.Headblend,Oa=t=>t.type===de.Color||t.type===de.Color2,jt=t=>t.type===de.Number||t.type===de.Number2,$a=t=>t.type===de.Size,Aa=t=>t.type===de.TypeEyeColor,Da=t=>t.type===de.Paragraph,Et=()=>{const{menuData:t,menuFirstLevelSelected:r,menuSecondLevelSelected:s}=J(),a=t.find(f=>f.id===r),n=a==null?void 0:a.subtype,o=(a==null?void 0:a.items)||[],l=o==null?void 0:o.find(f=>f.id===s),d=ka(l==null?void 0:l.subtype),m=Sa(l==null?void 0:l.subtype),u=$s(l==null?void 0:l.subtype),p=r!==null?n===xt.Head:!1,g=r!==null?n===xt.Outfits:!1,v=r!=null&&s!==null?(l==null?void 0:l.subtype)===Y.PedSelect:!1,b=c.exports.useCallback(()=>{let f=-1,h;const S=l==null?void 0:l.component;return f=S!==void 0?S:-1,p&&(f=101,h=l==null?void 0:l.id),v&&(f=11),{componentId:f,characterSettingsId:h}},[l,p,v]);return{firstLevelItem:a,secondLevelItem:l,secondLevelData:o,getComponentId:b,isOutfitFirstLevel:g,isHeadFirstLevel:p,isClothingSelected:d,isHeadSubtypeSelected:m,isOutfitSubtypeSelected:u}},H=()=>{const{translations:t}=J(),r=(a,n)=>{if(!a.length||!n)return n||null;const[o,...l]=a;return r(l,n[o])};return{t:(a,n)=>{const o=a.split(".");let l=r(o,t);if(l&&n)for(const[d,m]of Object.entries(n)){const u=new RegExp(`{${d}}`,"g");l=l.replace(u,m==null?void 0:m.toString())}return l||a}}};function N(...t){return kr(Sr(t))}const Pa=Ct("relative inline-flex items-center border border-transparent justify-center rounded-md text-sm font-medium ring-offset-white transition-[opacity,background-color] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:opacity-50 duration-100",{variants:{variant:{default:"bg-primary text-text hover:bg-secondary hover:border-border",light:"bg-button-light text-button-light-text",destructive:"bg-error text-text hover:bg-error-hover",success:"bg-success text-black hover:bg-success-hover",warning:"bg-orange-400 text-black hover:bg-orange-500"},size:{default:"px-4 py-2",sm:"rounded-md px-3",lg:"rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=He.forwardRef(({className:t,children:r,variant:s,size:a,loading:n,disabled:o,asChild:l=!1,onClick:d,contentClassName:m,...u},p)=>i("button",{className:N(Pa({variant:s,size:a,className:t})),ref:p,disabled:n||o,onClick:g=>{n||o||d==null||d(g)},...u,children:[n&&e("span",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:e(Or,{className:"h-5 w-5 animate-spin"})}),e("span",{className:N("inline-flex w-full items-center justify-center overflow-hidden whitespace-normal break-words",{"opacity-40 blur-[0.75px]":n,"opacity-80":o&&!n},m),children:r})]}));T.displayName="Button";const _e=He.forwardRef(({className:t,type:r,icon:s,...a},n)=>i("div",{className:"relative",children:[e("input",{autoComplete:"off","data-1p-ignore":!0,type:r,className:N("placeholder:text-mute flex h-10 w-full rounded-md border border-border bg-primary-dark-opacity px-3 py-2 text-sm text-text focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",{"pr-10":s},t),ref:n,...a}),s&&e("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s})]}));_e.displayName="Input";const yt=({value:t})=>{const{t:r}=H(),s=c.exports.useRef(null);return i("div",{className:"flex items-center",children:[e("div",{className:"w-full",children:e(_e,{ref:s,value:t||"",className:"h-10 w-full flex-grow rounded-md rounded-r-none border border-r-0 border-border bg-primary-dark p-2 pr-4 text-text",readOnly:!0})}),e(T,{onClick:()=>{!t||!s.current||(s.current.select(),document.execCommand("copy"),w("notify",{title:r("notifications.copied_to_clipboard")}))},className:"h-10 rounded-l-none border-border",contentClassName:"gap-2",children:e($r,{className:"size-4"})})]})},Mt=He.forwardRef(({className:t,...r},s)=>e(ns,{ref:s,className:N("border-tooltip-border bg-input-bg data-[state=checked]:bg-input-text data-[state=checked]:text-input-bg peer h-5 w-5 shrink-0 rounded-md border ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e(Qr,{className:N("flex items-center justify-center text-current"),children:e(Ee,{className:"h-5 w-5"})})}));Mt.displayName=ns.displayName;const Ta=Ct("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ot=c.exports.forwardRef(({className:t,...r},s)=>e(os,{ref:s,className:N(Ta(),t),...r}));Ot.displayName=os.displayName;const Fe=({label:t,wrapperClassName:r,labelClassName:s,...a})=>i("div",{className:N("flex w-fit cursor-pointer items-center",r),children:[e(Mt,{...a,onCheckedChange:n=>{var o;a.disabled||(o=a.onCheckedChange)==null||o.call(a,n)}}),e(Ot,{className:N("cursor-pointer pl-2 text-white",s),htmlFor:a.id,children:t})]}),As=t=>t.split(`
`).filter(s=>s.trim()!==""),Ds=t=>t.join(`
`),Ce=Zr,Ra=Kr,Ps=c.exports.forwardRef(({className:t,...r},s)=>e(is,{ref:s,className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r}));Ps.displayName=is.displayName;const ge=c.exports.forwardRef(({className:t,children:r,...s},a)=>i(Ra,{children:[e(Ps,{}),i(ls,{ref:a,className:N("fixed left-[50%] top-[50%] z-50 flex max-h-[80%] w-full max-w-lg translate-x-[-50%] translate-y-[-50%] flex-col gap-4 overflow-hidden border border-border bg-primary-dark p-6 text-white shadow-lg duration-200 scrollbar-thin data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[r,i(Xr,{className:"DialogClose absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none dark:ring-offset-slate-950 dark:data-[state=open]:bg-slate-800 dark:data-[state=open]:text-slate-400 dark:focus:ring-slate-300",children:[e(Oe,{className:"h-4 w-4"}),e("span",{className:"sr-only",children:"Close"})]})]})]}));ge.displayName=ls.displayName;const Ts=({className:t,...r})=>e("div",{className:N("flex flex-col space-y-1.5 text-center sm:text-left",t),...r});Ts.displayName="DialogHeader";const Rs=({className:t,...r})=>e("div",{className:N("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});Rs.displayName="DialogFooter";const js=c.exports.forwardRef(({className:t,...r},s)=>e(cs,{ref:s,className:N("text-lg font-semibold leading-none tracking-tight",t),...r}));js.displayName=cs.displayName;const Fs=c.exports.forwardRef(({className:t,...r},s)=>e(ds,{ref:s,className:N("text-sm text-slate-500 dark:text-slate-400",t),...r}));Fs.displayName=ds.displayName;const $t=Ir,zs=c.exports.createContext({}),he=({...t})=>e(zs.Provider,{value:{name:t.name},children:e(Mr,{...t})}),it=()=>{const t=c.exports.useContext(zs),r=c.exports.useContext(Bs),{getFieldState:s,formState:a}=Er(),n=s(t.name,a);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=r;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},Bs=c.exports.createContext({}),ve=c.exports.forwardRef(({className:t,...r},s)=>{const a=c.exports.useId();return e(Bs.Provider,{value:{id:a},children:e("div",{ref:s,className:N("space-y-2",t),...r})})});ve.displayName="FormItem";const ye=c.exports.forwardRef(({className:t,...r},s)=>{const{error:a,formItemId:n}=it();return e(Ot,{ref:s,className:N(a&&"text-red-500 dark:text-red-900",t),htmlFor:n,...r})});ye.displayName="FormLabel";const Ne=c.exports.forwardRef(({...t},r)=>{const{error:s,formItemId:a,formDescriptionId:n,formMessageId:o}=it();return e(ea,{ref:r,id:a,"aria-describedby":s?`${n} ${o}`:`${n}`,"aria-invalid":!!s,...t})});Ne.displayName="FormControl";const ja=c.exports.forwardRef(({className:t,...r},s)=>{const{formDescriptionId:a}=it();return e("p",{ref:s,id:a,className:N("text-sm text-slate-500 dark:text-slate-400",t),...r})});ja.displayName="FormDescription";const we=c.exports.forwardRef(({className:t,children:r,...s},a)=>{const{error:n,formMessageId:o}=it(),l=n?String(n==null?void 0:n.message):r;return l?e("p",{ref:a,id:o,className:N("text-sm font-medium text-red-500 dark:text-red-900",t),...s,children:l}):null});we.displayName="FormMessage";const tt=({control:t,className:r,name:s,onChange:a,label:n,placeholder:o,labelClassName:l,inputProps:d,type:m="text"})=>{if(!(s in t._formValues))throw new Error(`${s} is not in control field`);return e(he,{control:t,name:s,render:({field:u})=>i(ve,{children:[e(ye,{className:l,children:n}),e(Ne,{children:e(_e,{className:N("w-auto",r),placeholder:o,...u,onChange:p=>{u.onChange(p),a==null||a(p.target.value)},type:m,...d})}),e(we,{})]})})},Fa=({items:t,onAddClick:r,onRemoveClick:s,addLabel:a})=>{const n=(t==null?void 0:t.length)===0;return i("div",{className:"flex justify-between gap-2 rounded-md border border-border bg-primary-dark  p-2",children:[e("div",{className:"flex flex-wrap gap-2",children:t==null?void 0:t.map(o=>i("div",{className:"flex items-center gap-1 rounded-md bg-primary px-2 py-0.5 text-sm",children:[e("button",{type:"button",onClick:()=>s(o.value),children:e(Oe,{size:"1rem"})}),e("span",{children:o.label})]},o.value))}),e("button",{onClick:r,type:"button",className:N("flex h-8 shrink-0 items-center justify-center self-center rounded-md bg-primary px-2 py-1",{"aspect-square px-1":!n}),children:n?a:e(ze,{size:"1.2rem"})})]})},st=oa,rt=ia,Be=c.exports.forwardRef(({className:t,children:r,...s},a)=>i(ms,{ref:a,className:N("flex h-10 w-full items-center justify-between rounded-md border border-border bg-primary-dark px-3 py-2 text-sm ring-offset-white placeholder:text-text-inactive focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[r,e(ta,{asChild:!0,children:e(qt,{className:"h-4 w-4 opacity-50"})})]}));Be.displayName=ms.displayName;const Ls=c.exports.forwardRef(({className:t,...r},s)=>e(us,{ref:s,className:N("flex cursor-default items-center justify-center py-1",t),...r,children:e(Ar,{className:"h-4 w-4"})}));Ls.displayName=us.displayName;const Hs=c.exports.forwardRef(({className:t,...r},s)=>e(ps,{ref:s,className:N("flex cursor-default items-center justify-center py-1",t),...r,children:e(qt,{className:"h-4 w-4"})}));Hs.displayName=ps.displayName;const Le=c.exports.forwardRef(({className:t,children:r,position:s="popper",...a},n)=>e(sa,{children:i(fs,{ref:n,className:N("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border bg-primary-dark text-text shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...a,children:[e(Ls,{}),e(ra,{className:N("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e(Hs,{})]})}));Le.displayName=fs.displayName;const za=c.exports.forwardRef(({className:t,...r},s)=>e(hs,{ref:s,className:N("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r}));za.displayName=hs.displayName;const xe=c.exports.forwardRef(({className:t,children:r,...s},a)=>i(gs,{ref:a,className:N("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-text outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-primary focus:text-text dark:focus:bg-slate-800 dark:focus:text-slate-50",t),...s,children:[e("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e(aa,{children:e(Ee,{className:"h-4 w-4"})})}),e(na,{children:r})]}));xe.displayName=gs.displayName;const Ba=c.exports.forwardRef(({className:t,...r},s)=>e(bs,{ref:s,className:N("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",t),...r}));Ba.displayName=bs.displayName;const pt="-1",La=({onJobSelected:t,open:r,onOpenChange:s})=>{const{serverJobs:a}=J(),{t:n}=H(),o=W.object({name:W.string().min(1,n("exceptions.field_required")),grade:W.string().min(1,n("exceptions.field_required"))}),l=kt({resolver:St(o),defaultValues:{name:"",grade:pt},mode:"onChange"}),d=Object.entries(a||{}).map(([p,g])=>({key:p,...g})),m=p=>{const g=isNaN(parseInt(p.grade))?0:parseInt(p.grade);t({name:p.name,grade:g})},u=p=>{const g=a[p].grades;return i(Le,{avoidCollisions:!0,collisionPadding:16,children:[e(xe,{value:pt,children:n("permissions.jobs.all_grades")},pt),Object.values(g).map(v=>i(xe,{value:v.key,children:["(",v.key,") ",v.name]},v.key))]})};return c.exports.useEffect(()=>{r||l.reset()},[r]),e(Ce,{open:r,onOpenChange:s,children:i(ge,{children:[i(Ts,{children:[e(js,{children:n("permissions.jobs.dialog_title")}),e(Fs,{children:n("permissions.jobs.dialog_description")})]}),e($t,{...l,children:e("form",{className:"space-y-4",onSubmit:l.handleSubmit(m),children:e(he,{control:l.control,name:"name",render:({field:p})=>i("div",{className:"flex gap-6",children:[i(ve,{className:"w-1/2",children:[e(ye,{children:n("permissions.jobs.select_job_title")}),i(st,{onValueChange:g=>{var v,b;p.onChange(g),l.setValue("grade",((b=Object.values(((v=d.find(f=>f.key===g))==null?void 0:v.grades)||{})[0])==null?void 0:b.key)||"")},value:p.value,children:[e(Ne,{children:e(Be,{children:e(rt,{})})}),e(Le,{avoidCollisions:!0,collisionPadding:16,children:d.map(({key:g,name:v})=>e(xe,{value:g,children:v},g))})]}),e(we,{})]}),l.getValues("name")&&e(he,{control:l.control,name:"grade",render:({field:g})=>i(ve,{className:"w-1/2",children:[e(ye,{children:n("permissions.jobs.select_grade_title")}),i(st,{onValueChange:g.onChange,value:g.value,children:[e(Ne,{children:e(Be,{children:e(rt,{})})}),u(l.getValues("name"))]}),e(we,{})]})})]})})})}),i(Rs,{className:"mt-4 flex gap-2",children:[e(T,{onClick:()=>s(!1),children:e("span",{children:n("permissions.inputs.cancel")})}),e(T,{onClick:l.handleSubmit(m),children:e("span",{children:n("permissions.inputs.add")})})]})]})})},Vs=({control:t})=>{const{serverJobs:r}=J(),s=c.exports.useRef(null),{t:a}=H(),[n,o]=c.exports.useState(!1);if(!t)return null;if(!("permissions_jobs"in t._formValues)||!("permissions_identifiers"in t._formValues))throw new Error("Permission fields not in form control!");return e("div",{className:"relative",children:i("div",{className:"space-y-4",children:[e("h3",{className:"text-lg",children:a("permissions.title")}),e(he,{control:t,name:"permissions_jobs",render:({field:l})=>{var d;return i(ae,{children:[e("div",{ref:s,className:"mt-2 rounded-md bg-primary-dark",children:i("div",{className:"flex flex-col gap-2",children:[e("div",{className:"inline-flex cursor-pointer items-center gap-1",children:e("h4",{children:a("permissions.jobs.title")})}),e(Fa,{addLabel:a("permissions.jobs.add_job"),items:(d=l.value)==null?void 0:d.map(m=>{const u=m.name in r?r[m.name]:null,p=u==null?void 0:u.grades[m.grade];return u?{label:i(ae,{children:[e("span",{children:u.name}),m.grade>0&&i("span",{className:"pl-1 text-xs",children:["(",a("permissions.jobs.grade_and_higher",{grade:(p==null?void 0:p.name)||m.grade}),")"]})]}),value:m.name}:null}).filter(Boolean),onAddClick:()=>{o(!0)},onRemoveClick:m=>{var p;const u=(p=l.value)==null?void 0:p.filter(g=>g.name!==m);l.onChange(u)}})]})}),e(La,{open:n,onOpenChange:m=>{!m&&o(!1)},onJobSelected:m=>{let u=l.value||[];if(u.some(b=>b.name===m.name&&b.grade===m.grade)){w("notify",{title:a("notifications.job_already_defined"),isError:!0});return}u.find(b=>b.name===m.name)&&(u=u.filter(b=>b.name!==m.name));const v=[...u,m];l.onChange(v),o(!1)}})]})}}),e(he,{control:t,name:"permissions_identifiers",render:({field:l})=>e("div",{className:"mt-2 rounded-md bg-primary-dark",children:i("div",{className:"flex flex-col gap-2",children:[e("div",{className:"inline-flex cursor-pointer items-center gap-1",children:e("h4",{children:a("permissions.identifiers.title")})}),e("textarea",{className:"min-h-20 rounded-md border border-border bg-primary-dark p-2 text-sm",value:l.value,onChange:d=>l.onChange(d.target.value)})]})})})]})})},Ha=W.object({name:W.string().min(1),price:W.coerce.number().gte(0,"Price must be greater than or equal to 0"),permissions_jobs:W.array(W.object({name:W.string(),grade:W.number()})).optional(),permissions_identifiers:W.string().optional()}),Us=({data:t,onClose:r,isOpen:s,onSaved:a})=>{const{shopData:n}=J(),{t:o}=H(),l=n==null?void 0:n.type,d={name:(t==null?void 0:t.name)||"",price:(t==null?void 0:t.price)||0,permissions_jobs:(t==null?void 0:t.jobs)||[],permissions_identifiers:t!=null&&t.identifiers?Ds(t.identifiers):""},m=kt({defaultValues:d,resolver:St(Ha)}),{handleSubmit:u,control:p,reset:g}=m,v=async b=>{const{price:f,name:h,permissions_identifiers:S,permissions_jobs:k}=b,x=h==null?void 0:h.trim(),_=As(S||"");w("saveShopOutfit",{id:t==null?void 0:t.id,name:x,price:f,jobs:k||[],identifiers:_,shopName:l}),r(),a==null||a()};return c.exports.useEffect(()=>{g(d)},[t==null?void 0:t.id]),e(Ce,{onOpenChange:b=>!b&&r(),open:s,children:i(ge,{children:[e("h2",{className:"pl-2 text-lg font-medium",children:t!=null&&t.id?`${o("admin_mode.metadata_editor.outfit_title")}: ${t.name}`:o("admin_mode.metadata_editor.create_outfit")}),e("div",{className:"flex flex-grow flex-col gap-4 overflow-hidden",children:i($t,{...m,children:[e("div",{className:"overflow-y-auto px-2 pb-4 scrollbar-thin",children:i("form",{onSubmit:u(v),className:"space-y-8",children:[e(tt,{className:"w-full",control:p,name:"name",label:o("admin_mode.metadata_editor.inputs.outfit_name.label"),placeholder:o("admin_mode.metadata_editor.inputs.outfit_name.placeholder")}),e(tt,{control:p,name:"price",label:o("admin_mode.metadata_editor.inputs.price.label"),placeholder:o("admin_mode.metadata_editor.inputs.price.placeholder"),type:"number",inputProps:{min:0}}),e(Vs,{control:p})]})}),e(T,{type:"submit",onClick:u(v),className:"w-full",children:e("span",{children:t!=null&&t.id?o("admin_mode.metadata_editor.save"):o("admin_mode.metadata_editor.create")})})]})})]})})},Va=({})=>{var P;const{shopData:t,permissions:r,previewedItem:s}=J(),{t:a}=H(),{getComponentId:n}=Et(),o=c.exports.useRef(null),l=c.exports.useRef(null),d=s==null?void 0:s.id,m=t==null?void 0:t.type,{canEditArms:u,canEditMetadata:p,canUseAdminMode:g,canUseOutfitEditor:v,canUseStockManagement:b,canUseImageDebug:f}=r,{isAdminMode:h,isEditMetaData:S,isStockManagement:k,setIsEditMetaData:x,setIsStockManagement:_,isOutfitEditor:j,setIsOutfitEditor:I,isOutfitDialogOpen:D,setIsOutfitDialogOpen:F,isGroupByDrawable:z,setIsGroupByDrawable:C,isArmEditing:A,setIsArmEditing:G,setIsImageDebugging:R,isImageDebugging:X}=Ge();if(!h||!g)return null;const K=m==="SKIN_MENU",se=((P=t==null?void 0:t.modifiers)==null?void 0:P.CHANGING_ROOM)===!0,re=()=>{d!==null&&w("blacklistCurrent",d).then(()=>{w("notify",{title:a("admin_mode.image_debug.blacklisted_notify")})})},y=()=>{d!==null&&w("resetCurrent",d).then(()=>{w("notify",{title:a("admin_mode.image_debug.reset_notify")})})};return i("div",{className:"flex h-full w-full animate-pop-in flex-col items-end gap-4 overflow-hidden pr-1 text-white",children:[i("div",{className:"flex w-full items-center justify-center gap-2 rounded-md border border-border bg-primary-dark-opacity px-8 py-4 text-center font-bold uppercase text-red-500",children:[e(Yt,{className:"shrink-0"}),a("admin_mode.title")]}),i("div",{className:"flex flex-col items-end gap-12 overflow-y-auto pb-12 pr-1 text-right scrollbar-thin",children:[i("span",{children:[i("strong",{children:[a("admin_mode.current_shop"),":"]})," ",m]}),b&&!se&&i("div",{className:"space-y-2",children:[e("h2",{className:"text-lg font-bold",children:a("admin_mode.stock_management.title")}),e("p",{className:"text-sm",children:a("admin_mode.stock_management.description")}),i("div",{className:"space-y-2",children:[i(T,{className:"ml-auto w-fit rounded-md px-4 py-2",variant:k?"destructive":"default",onClick:()=>_(!k),contentClassName:"gap-2",children:[e(Jt,{className:"shrink-0 "}),e("span",{children:a(k?"admin_mode.stock_management.disable":"admin_mode.stock_management.enable")})]}),k&&i("div",{className:"space-y-2 pt-2",children:[e("p",{className:"text-sm",children:a("admin_mode.stock_management.group_by_drawable_description")}),e(Fe,{id:"isGroupByDrawable",name:"isGroupByDrawable",checked:z,onCheckedChange:$=>{C(!!$)},label:a("admin_mode.stock_management.group_by_drawable"),labelClassName:"font-bold",wrapperClassName:"flex-row-reverse ml-auto gap-1"})]})]})]}),p&&i("div",{className:"space-y-2",children:[e("h2",{className:"text-lg font-bold",children:a("admin_mode.metadata_editor.title")}),e("p",{className:"text-sm",children:a("admin_mode.metadata_editor.description")}),i(T,{className:"w-fit rounded-md px-4 py-2 font-medium",onClick:()=>x(!S),variant:S?"destructive":"default",contentClassName:"gap-2",children:[e(Dr,{className:"shrink-0"}),e("span",{children:a(S?"admin_mode.metadata_editor.disable":"admin_mode.metadata_editor.enable")})]})]}),u&&i("div",{className:"space-y-2",children:[e("h2",{className:"text-lg font-bold",children:a("admin_mode.arms_editor.title")}),e("p",{className:"text-sm",children:a("admin_mode.arms_editor.description")}),i(T,{className:"w-fit rounded-md px-4 py-2 font-medium",onClick:()=>G(!A),variant:A?"destructive":"default",contentClassName:"gap-2",children:[e(Wt,{className:"shrink-0"}),e("span",{children:a(A?"admin_mode.arms_editor.disable":"admin_mode.arms_editor.enable")})]})]}),v&&!K&&i("div",{className:"space-y-2",children:[e("h2",{className:"text-lg font-bold",children:a("admin_mode.outfit_editor.title")}),e("p",{className:"text-sm",children:a("admin_mode.outfit_editor.description")}),i("div",{children:[i(T,{className:N("w-fit rounded-md px-4 py-2 font-medium",{"rounded-bl-none rounded-br-none":j}),onClick:()=>{I(!j),j||setTimeout(()=>{var $;($=o.current)==null||$.scrollIntoView({behavior:"smooth"})},0)},disabled:j||k,variant:j?"destructive":"default",contentClassName:"gap-2",children:[e(It,{className:"shrink-0"}),a(j?"admin_mode.outfit_editor.disable":"admin_mode.outfit_editor.enable")]}),j&&i("div",{className:"flex flex-col flex-wrap gap-4 rounded-md rounded-tr-none bg-primary-opacity p-4",children:[e("div",{className:"space-y-2",children:e("p",{className:"text-sm",children:a("admin_mode.outfit_editor.explanation")})}),i("div",{className:"grid grid-cols-2 gap-2",ref:o,children:[e(T,{variant:"success",className:"font-medium",onClick:()=>F(!0),children:e("span",{children:a("admin_mode.outfit_editor.finish")})}),e(T,{variant:"destructive",className:" font-medium",onClick:()=>I(!1),children:e("span",{children:a("admin_mode.outfit_editor.cancel")})})]}),e(Us,{isOpen:D,onClose:()=>{F(!1)},onSaved:()=>{I(!1),w("notify",{title:a("notifications.outfit_created")})}})]})]})]}),f&&i("div",{className:"space-y-2",children:[e("h2",{className:"text-lg font-bold",children:a("admin_mode.image_debug.title")}),e("p",{className:"text-sm",children:a("admin_mode.image_debug.description")}),i("div",{children:[i(T,{className:N("w-fit rounded-md px-4 py-2 font-medium",{"rounded-bl-none rounded-br-none":X}),onClick:()=>{R(!X),X||setTimeout(()=>{var $;($=l.current)==null||$.scrollIntoView({behavior:"smooth"})},0)},variant:X?"destructive":"default",contentClassName:"gap-2",children:[e(Pr,{className:"shrink-0"}),e("span",{children:a(X?"admin_mode.image_debug.disable":"admin_mode.image_debug.enable")})]}),X&&i("div",{className:"flex flex-col flex-wrap gap-6 rounded-md rounded-tr-none bg-primary-opacity p-4",ref:l,children:[i("p",{className:"text-sm",children:["\u{1F4A1} ",a("admin_mode.image_debug.invis_hint")]}),i("div",{className:"space-y-2",children:[e("p",{className:"text-sm",children:a("admin_mode.image_debug.blacklist_desc")}),e(T,{variant:"destructive",onClick:re,disabled:d===null,children:a("admin_mode.image_debug.blacklist_button")})]}),i("div",{className:"space-y-2",children:[e("p",{className:"text-sm",children:a("admin_mode.image_debug.reset_desc")}),e(T,{variant:"destructive",onClick:y,disabled:d===null,children:a("admin_mode.image_debug.reset_button")})]}),i("div",{className:"space-y-2",children:[e("p",{className:"text-sm",children:a("admin_mode.image_debug.camera_desc")}),i("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[e(T,{variant:"default",onClick:()=>{var $;w("showProcessingCamera",{componentId:($=n())==null?void 0:$.componentId})},children:a("admin_mode.image_debug.camera_processing")}),e(T,{variant:"default",onClick:()=>{w("zoomOutCamera")},children:a("admin_mode.image_debug.camera_fullbody")})]})]})]})]})]}),e("div",{className:"space-y-4",children:s&&i(ae,{children:[i("div",{className:"space-y-1",children:[e("strong",{children:a("admin_mode.previewed_item_hash")}),e(yt,{value:s.name_hash})]}),i("div",{className:"space-y-1",children:[e("strong",{children:a("admin_mode.previewed_item_id")}),e(yt,{value:s.id})]})]})})]})]})},Ua=({className:t})=>i("svg",{className:t,fill:"currentColor",x:"0",y:"0",version:"1.1",viewBox:"0 0 36.7 36.7",children:[e("path",{fill:"#a5a5a5",d:"M11.3 17.3h7v-9l-3.9 1.3-2.8 3.7z"}),e("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M18.3 8.3h0c3.9 0 7 3.1 7 7v6c0 3.9-3.1 7-7 7h0c-3.9 0-7-3.1-7-7v-6c0-3.8 3.2-7 7-7zm0 4v4"}),e("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"1.25",d:"m8.8 21.6-2.9-3.2 2.9-3.2m19 0 2.8 3.2-2.8 3.2"})]}),Ga=({className:t})=>i("svg",{className:t,fill:"currentColor",x:"0",y:"0",version:"1.1",viewBox:"0 0 36.7 36.7",children:[e("path",{fill:"#a5a5a5",d:"M11.3 17.3h7v-9l-3.9 1.3-2.8 3.7z"}),e("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M18.3 8.3h0c3.9 0 7 3.1 7 7v6c0 3.9-3.1 7-7 7h0c-3.9 0-7-3.1-7-7v-6c0-3.8 3.2-7 7-7zm0 4v4"}),e("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"1.25",d:"M15.1 5.8 18.3 3l3.2 2.8m0 25-3.2 2.8-3.2-2.8"})]}),qa=({className:t})=>i("svg",{className:t,fill:"currentColor",x:"0",y:"0",version:"1.1",viewBox:"0 0 36.7 36.7",children:[e("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.25",d:"M18.3 8.3h0c3.9 0 7 3.1 7 7v6c0 3.9-3.1 7-7 7h0c-3.9 0-7-3.1-7-7v-6c0-3.8 3.2-7 7-7z",opacity:".4"}),e("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.3 11.6v4"}),e("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"1.25",d:"m15.1 6.7 3.2-2.8 3.2 2.8m0 11.6-3.2 2.8-3.2-2.8"})]}),Ya=({})=>{const{t}=H(),[r,s]=c.exports.useState(!1),a=()=>{s(!0)},n=()=>{s(!1)};return c.exports.useEffect(()=>{const o=setTimeout(()=>{s(!0)},500),l=setTimeout(()=>{s(!1)},2e3);return()=>{clearTimeout(o),clearTimeout(l),s(!1)}},[]),i("div",{className:"relative",children:[e(Ut,{in:r,timeout:150,classNames:"popin",unmountOnExit:!0,children:i("div",{className:"radius-md absolute bottom-10 right-0 mb-2 flex h-max w-max origin-bottom-right flex-col justify-between rounded-md border border-border bg-primary-dark-opacity p-3 pr-4 text-text",children:[e("span",{className:"text-md font-semibold",children:t("camera_slider.title")}),i("div",{className:"mt-2 flex flex-col gap-2 text-sm",children:[i("div",{className:"flex items-center gap-2",children:[e("div",{className:"rounded-md bg-primary-opacity p-1",children:e(Ua,{className:"size-7"})}),e("span",{children:t("camera_slider.rotate")})]}),i("div",{className:"flex items-center gap-2",children:[e("div",{className:"rounded-md bg-primary-opacity p-1",children:e(Ga,{className:"size-7"})}),e("span",{children:t("camera_slider.height")})]}),i("div",{className:"flex items-center gap-2",children:[e("div",{className:"rounded-md bg-primary-opacity p-1",children:e(qa,{className:"size-7"})}),e("span",{children:t("camera_slider.zoom")})]})]})]})}),e("div",{tabIndex:0,onFocus:a,onBlur:n,onMouseEnter:a,onMouseLeave:n,className:N("relative inline-flex aspect-square size-10 cursor-help items-center justify-center rounded-md border border-transparent bg-primary-opacity p-0 text-sm font-medium text-text ring-offset-white drop-shadow-lg transition-[opacity,background-color,border-color] hover:border-border hover:bg-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-1 disabled:opacity-50",{"border-white bg-primary":r}),children:e(Qt,{className:"size-5 shrink-0"})})]})},Ja=t=>{w("setCameraRotation",t)},Wa=(t,r)=>{w("setCameraVerticalPosition",{changeBy:t,componentId:r})},Qa=(t,r)=>{w("setCameraZoom",{changeBy:t,componentId:r})},Xa=t=>{w("resetCamera",{componentId:t})},Ka=()=>{w("zoomOutCamera")},Za=({currentComponent:t})=>{const{t:r}=H(),[s,a]=c.exports.useState(!1),[n,o]=c.exports.useState(0),[l,d]=c.exports.useState(0),[m,u]=c.exports.useState(null),p=c.exports.useRef(null),g=20,v=()=>{Ka()},b=()=>{Xa(t)},f=x=>{if(s){const _=x.clientX-n,j=x.clientY-l;let I=m;if(Math.abs(_)>=g&&(p==null?void 0:p.current)){if(I===null)u("X"),I="X";else if(I==="X"){const D=p.current,F=D==null?void 0:D.getBoundingClientRect();if(!F)return;const C=_/F.width*360,A=parseFloat(C.toFixed(0));Ja(A),o(x.clientX)}}if(Math.abs(j)>=g&&(p==null?void 0:p.current)){if(I===null)u("Y"),I="Y";else if(I==="Y"){const D=p.current,F=D==null?void 0:D.getBoundingClientRect();if(!F)return;const C=j/F.height*360,A=parseFloat(C.toFixed(0));Wa(A,t),d(x.clientY)}}}},h=()=>{a(!1),u(null)},S=x=>{var _;!((_=p.current)!=null&&_.contains(x.target))||Qa(x.deltaY,t)};return c.exports.useEffect(()=>(window.addEventListener("mousemove",f),window.addEventListener("mouseup",h),window.addEventListener("wheel",S),()=>{window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",h),window.removeEventListener("wheel",S)}),[s,n,m,l,p]),e("div",{ref:p,className:"absolute z-0 flex h-full w-full cursor-move flex-col items-center justify-end",onMouseDown:x=>{o(x.clientX),d(x.clientY),a(!0)},children:i("div",{className:"flex gap-2",children:[e(T,{className:"aspect-square size-10 bg-primary-opacity p-0 drop-shadow-lg duration-150 hover:bg-primary",onClick:v,children:e(Tr,{className:"size-5 shrink-0"})}),i(T,{className:N("h-10 w-fit bg-primary-opacity opacity-100 drop-shadow-lg duration-150 hover:bg-primary"),onClick:b,contentClassName:"gap-2",children:[e(Rr,{className:"size-5 shrink-0"}),e("span",{children:r("camera_slider.reset")})]}),e(Ya,{})]})})},At=({icon:t,children:r,className:s,active:a,...n})=>{const o=()=>c.exports.cloneElement(t,{className:"size-5 shrink-0"});return i(T,{...n,className:N(s,"group relative h-10 w-10 border-2 bg-primary-opacity px-2 py-2 transition-all duration-200 ease-in-out hover:w-fit hover:bg-primary",{"border-error-border hover:border-error-border":a}),contentClassName:"!shrink-0 justify-between gap-2",children:[o(),e("span",{className:"whitespace-nowrap opacity-0 transition-opacity group-hover:opacity-100",children:r})]})},en=ca,tn=He.forwardRef(({...t},r)=>e("div",{className:"contents max-w-full",ref:r,children:e(la,{...t})})),sn=da,Gs=He.forwardRef(({className:t,sideOffset:r=4,align:s="center",...a},n)=>e(xs,{align:s,avoidCollisions:!0,hideWhenDetached:!0,collisionPadding:16,ref:n,sideOffset:r,className:N("border-tooltip-border bg-tooltip-bg text-tooltip-text z-50 max-w-full overflow-hidden rounded-md border px-3 py-1.5 text-sm shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t,"max-w-[var(--radix-tooltip-content-available-width)]"),...a}));Gs.displayName=xs.displayName;const rn=({disabled:t})=>{const{isNumeralMode:r,setIsNumeralMode:s}=J(),{t:a}=H();return i(tn,{children:[e(sn,{className:"inline cursor-help",asChild:!0,children:e("div",{children:e(At,{icon:e(Xt,{}),disabled:t,onClick:()=>s(!r),active:r,children:a("control_panel.id_only_mode")})})}),e(Gs,{align:"start",side:"bottom",children:a(t?"id_only_mode.tooltip_active":"id_only_mode.tooltip")})]})},an=({disabled:t})=>{const[r,s]=c.exports.useState(!1),[a,n]=c.exports.useState(""),{items:o}=me(),{t:l}=H(),d=()=>{w("saveOutfit",{outfitName:a}),n(""),s(!1)};return i(Ce,{onOpenChange:()=>{n(""),s(!1)},open:r,children:[e(At,{onClick:()=>{Ue(o),s(!0)},disabled:t,icon:e(Kt,{}),children:l("control_panel.save_outfit")}),i(ge,{className:"max-w-[400px]",children:[e("h2",{className:"text-lg font-medium",children:l("outfits.save_outfit")}),e(_e,{className:"w-full",name:"outfitName",value:a,onChange:u=>n(u.target.value),placeholder:l("outfits.save_outfit_placeholder")}),e(T,{type:"submit",onClick:d,className:"w-full",disabled:!(a!=null&&a.length)||t,children:e("span",{children:l("outfits.save_outfit_button")})})]})]})},nn=({forceNumeralMode:t})=>{var v,b;const{isAdminMode:r,toggleAdminMode:s}=Ge(),{isCheckoutLoading:a,shopData:n,permissions:o}=J(),{items:l}=me(),{t:d}=H(),{canUseAdminMode:m,canToggleIdOnlyMode:u}=o,p=(v=n==null?void 0:n.modifiers)==null?void 0:v.DISABLE_OUTFIT_SAVING,g=!u||((b=n==null?void 0:n.modifiers)==null?void 0:b.DISABLE_ID_ONLY_MODE_BUTTON);return i("div",{className:"flex h-fit w-fit flex-col gap-2",children:[m&&e(At,{icon:e(Zt,{}),onClick:s,disabled:a,active:r,className:"uppercase",children:d("control_panel.admin_mode")}),!p&&e(an,{disabled:a||!!(l!=null&&l.length)}),!g&&e(rn,{disabled:a||r||t})]})},on=({isOpen:t,onClose:r})=>{const{t:s}=H();return e(Ce,{open:t,onOpenChange:a=>!a&&r(),children:i(ge,{className:"flex max-w-xs flex-col items-center justify-center pb-8 pt-12 text-center",children:[e("div",{className:"aspect-square w-fit rounded-full border border-primary-opacity bg-primary-dark p-6 shadow-lg",children:e(Me,{className:"size-16 text-green-500"})}),e("h2",{className:"text-lg font-medium",children:s("full_cart_dialog.title")}),e("p",{children:s("full_cart_dialog.description")}),i("div",{className:"grid-rows-auto grid w-[80%] justify-center gap-2 pt-4",children:[e(T,{className:"w-full ",variant:"success",onClick:r,children:e("span",{children:s("full_cart_dialog.continue_shopping")})}),e(T,{className:"w-full",onClick:()=>w("close"),children:e("span",{children:s("full_cart_dialog.leave")})})]})]})})},ln=()=>{const[t,r]=c.exports.useState(0),[s,a]=c.exports.useState(""),[n,o]=c.exports.useState(""),[l,d]=c.exports.useState(null),[m,u]=c.exports.useState(!1),p=()=>{r(0),a(""),o(""),d(null),u(!1)};Q("showInfoDialog",v=>{!v||v.id===void 0||(p(),r(v.id||0),a(v.title||""),o(v.description||""),d(v.url||null),u(!0))});const g=()=>{w("onInfoDialogConfirm",t),u(!1),d(null),p()};return i(ae,{children:[e("style",{children:`
        .InfoDialog .DialogClose {
            display:none;
        }
        `}),e(Ce,{open:m,onOpenChange:v=>!v&&g(),children:e(ge,{className:"InfoDialog w-full max-w-xl",children:e("div",{className:"flex h-full w-full flex-col justify-center gap-16 overflow-hidden",children:i("div",{className:"flex w-full flex-col justify-center gap-4 overflow-hidden",children:[e("h2",{className:"text-lg font-medium",children:s}),e("div",{className:"overflow-y-auto scrollbar-thin",dangerouslySetInnerHTML:{__html:n}}),!!(l!=null&&l.length)&&e("div",{className:"mx-auto w-3/4",children:e(yt,{value:l})}),e("div",{className:"flex justify-end gap-16",children:e(T,{variant:"default",onClick:g,children:"Ok"})})]})})})})]})},cn=[33],qs=[10],dn=t=>{const{isClothingSelected:r,selectedItem:s,isNumeralMode:a,playerPedHash:n}=t;return!r||!(s!=null&&s.component)?!1:n===void 0||!ot.includes(n)?!0:!cn.includes(s==null?void 0:s.component)&&(a||qs.includes(s==null?void 0:s.component))},mn=(t,r)=>!r||!t||!r[t]?[]:r[t],un=30,pn=10,fn=0,hn="http://157.230.126.68:9573/api.php",Ys=async(t,r=0)=>{var h,S;const{shopType:s,componentId:a,lastId:n,category:o,colors:l,searchQuery:d,fetchAllItems:m,groupByDrawable:u,notInAnyShop:p,onlyAddons:g,isFirstFetch:v,externalServerData:b,pedModel:f}=t;if(!s||r>5)return[];if(et()){const k=new URL(hn);k.searchParams.append("componentId",a.toString()),k.searchParams.append("pageSize",un.toString()),k.searchParams.append("slow",fn.toString()),n&&k.searchParams.append("lastId",n.toString()),o&&k.searchParams.append("category",o);const x=await fetch(k.toString());if(!x.ok)throw new Error("Failed to fetch items");return(await x.json()).items}else{let k={shopType:s,componentId:a,lastId:n||0,category:o||void 0,colors:l||void 0,searchQuery:d||void 0,fetchAllItems:m,groupByDrawable:u,onlyAddons:g,notInAnyShop:p,isFirstFetch:v},x;const _=(S=(h=b==null?void 0:b.shopConfig)==null?void 0:h.modifiers)==null?void 0:S.HAS_EVERYTHING;if(b&&a!==3&&a!==33&&!m&&!_){const{apiUrl:I,...D}=b,F=await fetch(I,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({shopName:s,params:{...k},pedModel:f,externalData:D})}),z=F?await F.json():[];x=await w("resolveExternalItems",z)}else x=await w("fetchItems",k);return!x||!x.items?(await new Promise(I=>setTimeout(I,1e3)),await Ys(t,r+1)):x.items}},ie={white:"white",beige:"#E9DAC4",gray:"gray",black:"black",brown:"#6a4313",red:"red",purple:"purple",pink:"#ff6ca5",orange:"#ff7a00",yellow:"yellow",turquoise:"turquoise",green:"green",blue:"blue",camo:"linear-gradient(135deg, #3c4a1d 25%, #7e8b3d 25%, #7e8b3d 50%, #3c4a1d 50%, #3c4a1d 75%, #7e8b3d 75%, #7e8b3d 100%)"},Js={white:ie.white,beige:ie.beige,gray:ie.gray,black:ie.black,brown:ie.brown,red:ie.red,purple:ie.purple,pink:ie.pink,orange:ie.orange,yellow:ie.yellow,turquoise:ie.turquoise,green:ie.green,blue:ie.blue,camo:ie.camo},Ws={0:"#1c1f21",1:"#272a2c",2:"#312e2c",3:"#35261c",4:"#4b321f",5:"#5c3b24",6:"#6d4c35",7:"#6b503b",8:"#765c45",9:"#7f684e",10:"#99815d",11:"#a79369",12:"#af9c70",13:"#bba063",14:"#d6b97b",15:"#dac38e",16:"#9f7f59",17:"#845039",18:"#682b1f",19:"#61120c",20:"#640f0a",21:"#7c140f",22:"#a02e19",23:"#b64b28",24:"#a2502f",25:"#aa4e2b",26:"#626262",27:"#808080",28:"#aaaaaa",29:"#c5c5c5",30:"#463955",31:"#5a3f6b",32:"#763c76",33:"#ed74e3",34:"#eb4b93",35:"#f299bc",36:"#04959e",37:"#025f86",38:"#023974",39:"#3fa16a",40:"#217c61",41:"#185c55",42:"#b6c034",43:"#70a90b",44:"#439d13",45:"#dcb857",46:"#e5b103",47:"#e69102",48:"#f28831",49:"#fb8057",50:"#e28b58",51:"#d1593c",52:"#ce3120",53:"#ad0903",54:"#880302",55:"#1f1814",56:"#291f19",57:"#2e221b",58:"#37291e",59:"#2e2218",60:"#231b15",61:"#020202",62:"#706c66",63:"#9d7a50"},gn={0:"#992532",1:"#c8395d",2:"#bd516c",3:"#b8637a",4:"#a6526b",5:"#b1434c",6:"#7f3133",7:"#a4645d",8:"#c18779",9:"#cba096",10:"#c6918f",11:"#ab6f63",12:"#b06050",13:"#a84c33",14:"#b47178",15:"#ca7f92",16:"#ed9cbe",17:"#e775a4",18:"#de3e81",19:"#b34c6e",20:"#712739",21:"#4f1f2a",22:"#aa222f",23:"#de2034",24:"#cf0813",25:"#e55470",26:"#dc3fb5",27:"#c227b2",28:"#a01ca9",29:"#6e1875",30:"#731465",31:"#56165c",32:"#6d1a9d",33:"#1b3771",34:"#1d4ea7",35:"#1e74bb",36:"#21a3ce",37:"#25c2d2",38:"#23cca5",39:"#27c07d",40:"#1b9c32",41:"#148604",42:"#70d041",43:"#c5ea34",44:"#e1e32f",45:"#ffdd26",46:"#fac026",47:"#f78a27",48:"#fe5910",49:"#be6e19",50:"#f7c97f",51:"#fbe5c0",52:"#f5f5f5",53:"#b3b4b3",54:"#919191",55:"#564e4e",56:"#180e0e",57:"#58969e",58:"#4d6f8c",59:"#1a2b55",60:"#a07e6b",61:"#826355",62:"#6d5346",63:"#3e2d27"},bn=(t,r)=>[t,r].map(s=>s?{id:s==null?void 0:s.label,name:s==null?void 0:s.label}:null).filter(s=>s!==null),xn=t=>{const{selectedColors:r,onColorSelect:s,searchQuery:a,onSearchQueryChange:n,onlyAddons:o,onOnlyAddonsChange:l,onClearFilters:d,numOfFilters:m,onShowOnlyStockInShopMgmtChange:u,showOnlyStockInShopMgmt:p,notInAnyShopFilter:g,onNotInAnyShopChange:v}=t;return{colorFilter:{availableColors:Js,selectedColors:r,onColorSelect:s},searchFilter:{searchQuery:a,onSearchQueryChange:n},onlyAddonFilter:{onlyAddons:o,onOnlyAddonsChange:l},showOnlyStockFilter:u&&{showOnlyStockInShopMgmt:p,onShowOnlyStockInShopMgmtChange:u},notInAnyShopFilter:v&&{notInAnyShop:g,onNotInAnyShopChange:v},onClearFilters:d,numOfFilters:m}},$e=({src:t,placeholder:r,...s})=>{let a=t&&t!=="none"?t:r!=null?r:"img/placeholder.webp";return t!=null&&t.startsWith("*")&&(a=t.slice(1)),e("img",{src:a,...s,onError:n=>{n.currentTarget.onerror=null,n.currentTarget.src=r!=null?r:"img/placeholder.webp"}})},vn=({imgSrc:t,title:r,selected:s,onClick:a,isCompact:n})=>i("button",{onClick:()=>{oe(ne.NAV_UP_DOWN),a==null||a()},className:N("group relative flex h-24 w-24 shrink-0 animate-pop-in justify-center overflow-hidden rounded-md border border-border bg-primary-opacity p-2 transition-colors hover:border-border-hover",{"bg-primary-light-opacity":s,"h-10 w-auto items-center gap-2 px-4":n}),children:[e($e,{src:t,alt:r,className:N("h-[3.75rem] object-contain drop-shadow-lg",{"h-6":n})}),n?e("p",{className:"line-clamp-1 w-full break-all text-sm font-medium leading-4 text-text",children:r}):e("div",{className:"absolute bottom-0 flex h-full w-full items-end bg-gradient-shadow p-1",children:e("p",{className:"line-clamp-2 w-full break-words text-center text-sm font-medium leading-4 text-text group-hover:line-clamp-4",children:r})})]}),ft=({categories:t,onCategoryClick:r,selectedCategories:s,className:a,isCompact:n,disabled:o})=>{const{isStockManagement:l}=Ge(),d=l?t==null?void 0:t.filter(m=>!["arms","gloves"].includes(m.id)):t;return e("div",{className:N(a,{"pointer-events-none opacity-70":o}),children:d==null?void 0:d.map(m=>e(vn,{imgSrc:m.image,title:m.label,onClick:()=>{o||r(m.id)},selected:s==null?void 0:s.includes(m.id),isCompact:n},m.key||m.id))})},Ft=({control:t,name:r,label:s,labelClassName:a})=>{if(!(r in t._formValues))throw new Error(`${r} is not in control field`);return e(he,{control:t,name:r,render:({field:n})=>i(ve,{className:"flex w-fit cursor-pointer items-center space-y-1",children:[i("div",{className:"flex items-center space-x-2",children:[e(Ne,{children:e(Mt,{checked:n.value,onCheckedChange:o=>{n.onChange(o)}})}),e(ye,{className:a,children:s})]}),e(we,{})]})})},Qs=({color:t,selected:r,onClick:s,isSmall:a})=>e("button",{className:N("relative size-8 shrink-0 overflow-hidden rounded-md border border-border",{"border-black outline outline-2 outline-white":r,"!size-8":a}),style:{background:t},onClick:s,type:"button",children:e("span",{className:"absolute inset-0 bg-color-shade"})}),Nt=({availableColors:t,selectedColors:r,onChange:s,label:a})=>{const n=Object.entries(t||{}).filter(([o])=>o!=="-1");return i("div",{className:"space-y-2",children:[a&&e("span",{children:a}),e("div",{className:"flex flex-wrap gap-2",children:n.map(([o,l])=>e(Qs,{color:l,selected:r==null?void 0:r.includes(o),onClick:()=>s==null?void 0:s(o),isSmall:!0},o))})]})},yn=({control:t,name:r,label:s,labelClassName:a,availableColors:n})=>{if(!(r in t._formValues))throw new Error(`${r} is not in control field`);return e(he,{control:t,name:r,render:({field:o})=>i(ve,{children:[e(ye,{className:a,children:s}),e(Ne,{children:e(Nt,{availableColors:n,selectedColors:o.value,onChange:l=>{o.value.includes(l)?o.onChange(o.value.filter(d=>d!==l)):o.onChange([...o.value,l])}})}),e(we,{})]})})},Nn=({control:t,options:r,name:s,label:a,labelClassName:n,className:o})=>{if(H(),!(s in t._formValues))throw new Error("category_key is not in control field");return e(he,{control:t,name:s,render:({field:l})=>i(ve,{children:[e(ye,{className:n,children:a}),i(st,{onValueChange:l.onChange,value:l.value,children:[e(Ne,{children:e(Be,{children:e(rt,{})})}),e(Le,{children:r==null?void 0:r.map(d=>e(xe,{value:d.value,children:d.label},d.value))})]}),e(we,{})]})})},wn=W.object({label:W.string().optional(),price:W.coerce.number().gte(0,"Price must be greater than or equal to 0"),colors:W.array(W.string()),category:W.string().optional(),isBlacklisted:W.boolean(),permissions_jobs:W.array(W.object({name:W.string(),grade:W.number()})).optional(),permissions_identifiers:W.string().optional(),resetImg:W.boolean().optional()}),_n=({data:t,onClose:r,onEdit:s})=>{var f;const{t:a}=H(),{clothingCategories:n,isGroupByDrawable:o}=J(),l=(t==null?void 0:t.component_id)&&(t==null?void 0:t.component_id)in n?n[t==null?void 0:t.component_id]:[],d=(f=t==null?void 0:t.colors)!=null&&f.length?t.colors.split(","):[],m={label:(t==null?void 0:t.label)||"",price:(t==null?void 0:t.price)||0,colors:d,category:(t==null?void 0:t.category)||"",isBlacklisted:(t==null?void 0:t.is_blacklisted)||!1,permissions_jobs:(t==null?void 0:t.jobs)||[],permissions_identifiers:t!=null&&t.identifiers?Ds(t.identifiers):"",resetImg:!1},u=kt({defaultValues:m,resolver:St(wn)}),{handleSubmit:p,control:g,reset:v}=u,b=async h=>{if(!(t!=null&&t.id))return;const{label:S,colors:k,category:x,isBlacklisted:_,price:j,resetImg:I}=h,D=S==null?void 0:S.trim(),F=k==null?void 0:k.join(","),z=As(h.permissions_identifiers||"");w("editItemMetadata",{id:t==null?void 0:t.id,label:D,colors:F,category:x,isBlacklisted:_,price:j,jobs:h.permissions_jobs||[],identifiers:z,groupByDrawable:o,resetImg:I}),s({id:t==null?void 0:t.id,label:D,colors:F,category:x,is_blacklisted:_,price:j,jobs:h.permissions_jobs||[],identifiers:z},I),r()};return c.exports.useEffect(()=>{v(m)},[t==null?void 0:t.id]),e(Ce,{onOpenChange:h=>!h&&r(),open:!!t,children:i(ge,{children:[e("h2",{className:"pl-2 text-lg font-medium",children:a("admin_mode.metadata_editor.dialog_title")}),e("div",{className:"flex flex-grow flex-col gap-4 overflow-hidden",children:i($t,{...u,children:[e("div",{className:"overflow-y-auto px-2 pb-4 scrollbar-thin",children:i("form",{onSubmit:p(b),className:"space-y-8",children:[o&&e("p",{className:"text-sm text-warning",children:a("admin_mode.metadata_editor.group_by_drawable_warning")}),!o&&e(tt,{control:g,name:"label",label:a("admin_mode.metadata_editor.inputs.label.label"),placeholder:a("admin_mode.metadata_editor.inputs.label.placeholder")}),e(tt,{control:g,name:"price",label:a("admin_mode.metadata_editor.inputs.price.label"),placeholder:a("admin_mode.metadata_editor.inputs.price.placeholder"),type:"number",inputProps:{min:0}}),(l==null?void 0:l.length)>0&&e(Nn,{control:g,name:"category",label:a("admin_mode.metadata_editor.inputs.category.label"),options:l.map(h=>({label:h.label,value:h.name}))}),!o&&e(yn,{control:g,name:"colors",label:a("admin_mode.metadata_editor.inputs.colors.label"),availableColors:Js}),e(Ft,{control:g,name:"isBlacklisted",label:a("admin_mode.metadata_editor.inputs.blacklisted.label")}),!o&&i(ae,{children:[e(Vs,{control:g}),e(Ft,{control:g,name:"resetImg",label:a("admin_mode.metadata_editor.inputs.resetImg.label")})]})]})}),e(T,{type:"submit",onClick:p(b),className:"w-full",children:e("span",{children:a("admin_mode.metadata_editor.save")})})]})})]})})},Ae=({value:t,className:r})=>{const{t:s}=H();return t?e("span",{className:r,children:s("currency_format",{amount:t})}):e("span",{className:N("uppercase",r),children:s("free")})},Dt=pa,lt=ua,qe=c.exports.forwardRef(({className:t,align:r="center",sideOffset:s=4,...a},n)=>e(ma,{children:e(vs,{ref:n,align:r,sideOffset:s,className:N("border-border text-text bg-primary-dark z-50 w-72 rounded-md border p-4 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t,"scrollbar-thin scrollbar-thumb-scrollbar scrollbar-track-scrollbar-track max-h-[var(--radix-popover-content-available-height)] overflow-y-auto"),avoidCollisions:!0,collisionPadding:16,...a})}));qe.displayName=vs.displayName;const Cn=({open:t,onClose:r,currentArms:s,children:a,onConfirm:n,loading:o,isGroupByDrawable:l})=>{const[d,m]=c.exports.useState(s),{currentPedData:u,availableArms:p}=J(),{t:g}=H(),v=f=>{m(f.name_hash),Re(f)};c.exports.useEffect(()=>{m(s)},[s]);const b=u.pedModel;return i(fa,{open:t,onOpenChange:f=>!f&&r(),modal:!0,children:[e(lt,{children:a}),i(qe,{className:"w-full max-w-[600px] pb-16",onOpenAutoFocus:f=>f.preventDefault(),children:[e("div",{className:"grid grid-cols-4 gap-4",children:p.filter(f=>f.ped_model==b).map(f=>{const h=d===f.name_hash;return i("div",{role:"button",onClick:()=>!o&&v(f),className:N("relative flex h-48 w-full shrink cursor-pointer items-center justify-center overflow-hidden rounded-md border border-border bg-gradient-shine p-4",{"border-white":h,"pointer-events-none opacity-80":o}),children:[e($e,{src:f.image,className:"h-full object-contain drop-shadow-lg"}),h&&e("div",{className:"absolute left-1 top-1 flex aspect-square items-center justify-center rounded-full bg-primary-dark p-1.5",children:e(Ee,{className:"size-4 text-white"})})]},f.id)})}),e(T,{className:"absolute bottom-3 left-1/2 shrink-0 -translate-x-1/2 transform shadow-lg",variant:"success",onClick:()=>n(d),disabled:!l&&s===d||d===void 0,loading:o,children:i("div",{className:"flex items-center gap-2",children:[e(Ee,{className:"size-5"}),e("span",{children:g("admin_mode.arms_editor.confirm")})]})})]})]})},Se=({type:t,onClick:r,component:s="button",isEverythingFree:a})=>{let n=null;const o=s;switch(t){case"add":n=e(ze,{className:"size-5 text-green-500"});break;case"remove":n=e(Ve,{className:"size-5 text-red-500"});break;case"edit":n=e(es,{className:"size-5 text-yellow-400"});break;case"arms":n=e(Wt,{className:"size-5 text-orange-400"});break;case"cart":a?n=e(ze,{className:"size-5 text-green-500"}):n=e(Me,{className:"size-5 text-green-500"});break}return e(o,{role:"button",onClick:r,className:"aspect-square rounded-full bg-primary-dark p-2",children:n})},kn=({product:t,isInShop:r,isPreviewed:s,onIsInShopChange:a,isInCart:n,onAddToCartClick:o,onMetadataEditClick:l,onRemoveFromCartClick:d,onArmsChange:m,onPreview:u,onPreviewCancel:p})=>{var te;const{id:g,component_id:v,isUnset:b}=t,{isAdminMode:f,isStockManagement:h,shopData:S,isEditMetaData:k,isOutfitEditor:x,isGroupByDrawable:_,isArmEditing:j}=J(),I=S==null?void 0:S.type,D=(te=S==null?void 0:S.modifiers)==null?void 0:te.IS_EVERYTHING_FREE,[F,z]=c.exports.useState(!1),[C,A]=c.exports.useState(!1),G=f&&h&&!b,R=f&&k&&!b&&![3,33].includes(v||0),X=f&&x,K=f&&j&&v===11&&!b,se=!f,re=(M,B)=>{!G||!B||(a==null||a(M),w("toggleItemStock",{id:g,shopType:B,addToStock:M,groupByDrawable:_}))},y=M=>{z(!0),w("setRecommendedArms",{armsHash:M,clothingId:g,groupByDrawable:_}).then(()=>{z(!1),A(!1),m==null||m(M)})},P=()=>{o==null||o(),oe(ne.PREVIEW_ITEM_1)},$=()=>{d==null||d(),oe(ne.REMOVE_FROM_CART)};return i(ae,{children:[i("div",{className:"absolute right-1 top-1 z-10 flex gap-1 p-0.5 font-bold text-white",children:[i("div",{className:"pointer-events-none invisible flex flex-wrap gap-0.5 opacity-0 transition-opacity group-hover:pointer-events-auto group-hover:visible group-hover:opacity-100",children:[R&&e(Se,{type:"edit",onClick:l}),G&&e(Se,{type:r?"remove":"add",onClick:()=>re(!r,I)}),K&&e(Cn,{open:C,onClose:()=>A(!1),currentArms:t.recommended_arms,onConfirm:y,loading:F,isGroupByDrawable:_,children:e(Se,{component:"div",type:"arms",onClick:()=>{u==null||u(),A(!0)}})}),se&&!n&&e(Se,{type:"cart",onClick:P,isEverythingFree:D})]}),X&&e("div",{className:N("opacity-0 transition-opacity group-hover:opacity-100",{"opacity-100":n}),children:e(Se,{type:n?"remove":"add",onClick:()=>{if(n){$==null||$();return}u==null||u(),P==null||P()}})}),se&&n&&e(Se,{type:"remove",onClick:$})]}),se&&s&&!n&&i("div",{className:"absolute left-[1px] top-[1px] z-10 flex h-[calc(100%-2px)] w-[calc(100%-2px)] animate-pop-in flex-col items-center justify-center gap-2 rounded-md bg-black/30 p-4 text-text backdrop-blur-sm",children:[e("button",{onClick:P,className:"aspect-square w-fit rounded-full border border-primary-opacity bg-primary-dark p-2 transition-[border-color,box-shadow] hover:border-primary hover:shadow-lg",children:D?e(ze,{className:"size-8 text-green-500"}):e(Me,{className:"size-8 text-green-500"})}),e("button",{onClick:p,className:"aspect-square w-fit rounded-full border border-primary-opacity bg-primary-dark p-2 transition-[border-color,box-shadow] hover:border-primary hover:shadow-lg",children:e(Oe,{className:"size-6 text-red-500"})})]})]})},Sn=(t,r,s)=>!r||(r=r-1,s.components[r]===void 0)?!1:s.components[r][0]===t.drawable_id&&s.components[r][1]===t.texture_id,In=({product:t,onClick:r,onAddToCartClick:s,isInCart:a,onRemoveFromCartClick:n,onMetadataEditClick:o,disableControls:l,onChangeIsInShop:d,onPreviewCancel:m,onArmsChange:u,isPreviewed:p})=>{const{label:g,price:v,image:b,in_shop:f,component_id:h,isUnset:S,is_blacklisted:k}=t,{initPedData:x,isAdminMode:_,isStockManagement:j}=J(),{t:I}=H(),[D,F]=c.exports.useState(f),z=_&&j&&!S,C=Sn(t,h,x),A=C||_&&p||z&&!!k,G=()=>{var R;((R=t.label)==null?void 0:R.toLowerCase().includes("festive"))&&Math.random()>.95?oe(ne.PREVIEW_ITEM_FESTIVE):oe(ne.PREVIEW_ITEM_1),r==null||r()};return i("div",{className:"group relative overflow-hidden rounded-md",children:[i("button",{onClick:G,className:N("relative flex h-36 w-full flex-col items-center justify-center gap-2 overflow-hidden rounded-md border border-border bg-gradient-shine p-2 transition-all hover:border-border-hover",{"opacity-40 group-hover:opacity-100":z&&!D,"border-white":z?D:C}),children:[e($e,{src:S?"img/unsetcard.webp":b,alt:g,className:"h-24 object-contain drop-shadow-lg"}),A&&i("div",{className:N("pointer-events-none absolute left-1 top-1 flex items-center gap-1 rounded-xl bg-primary-dark p-1.5 transition-opacity group-hover:opacity-0"),children:[C&&e(It,{className:"size-4 text-white"}),_&&p&&e(ts,{className:"size-4 text-white"}),z&&!!k&&e(jr,{className:"size-4 text-red-500"})]}),e("div",{className:"text-fill w-full bg-gradient-text bg-clip-text text-center text-sm font-extrabold leading-4 text-transparent drop-shadow-lg transition-opacity group-hover:opacity-50",children:S?I("unset_item"):e(Ae,{value:v})}),e("div",{className:"pointer-events-none absolute bottom-0 flex h-full w-full items-end bg-gradient-shadow-dark px-2 py-4 opacity-0 transition-opacity group-hover:opacity-100",children:e("p",{className:"line-clamp-6 w-full text-center text-sm font-bold leading-4 text-text",children:g})})]}),!l&&e(kn,{product:t,isInShop:D,isInCart:a,isPreviewed:p,onIsInShopChange:R=>{F(R),d==null||d(R)},onAddToCartClick:s,onRemoveFromCartClick:n,onMetadataEditClick:o,onArmsChange:u,onPreview:G,onPreviewCancel:m})]})},Xs=c.exports.memo(In);function je({className:t,...r}){return e("div",{className:N("bg-primary-opacity animate-pulse rounded-md",t),...r})}const Ks=({className:t})=>e(je,{className:N("h-36 w-full rounded-md p-2",t)}),En={List:c.exports.forwardRef(({style:t,children:r,...s},a)=>e("div",{ref:a,style:t,...s,className:"grid w-full grid-cols-2 gap-x-3 gap-y-4 pr-2 2xl:grid-cols-4",children:r}))},Mn=({items:t,onFetchMore:r,isLoading:s,isAllItemsLoaded:a,onEditMetadata:n,onArmsChange:o,firstLevelCategory:l,secondLevelCategory:d})=>{const{previewedItem:m,setPreviewedItem:u}=J(),{addItem:p,removeItem:g,isItemInCart:v,items:b}=me(),{t:f}=H(),[h,S]=c.exports.useState(null),k=c.exports.useCallback(I=>{!t||(Re(t[I]),u(t[I]))},[t,Re]),x=c.exports.useCallback(I=>{S(I)},[]),_=c.exports.useCallback(I=>{p(I),Re(I),u(null)},[p,Re]),j=c.exports.useCallback(I=>{g(I.id),vt([I.component_id]),u(null)},[g,vt]);return c.exports.useEffect(()=>{u(null)},[l,d]),c.exports.useEffect(()=>()=>{u(null)},[]),!s&&!(t!=null&&t.length)?e("div",{className:"flex h-min min-h-20 w-full items-center justify-center rounded-md bg-primary-opacity text-white",children:i("div",{className:"flex h-full flex-col items-center justify-center gap-2 px-6 py-8 text-center",children:[e("p",{children:f("clothes_list.no_items")}),e("p",{className:"text-sm",children:f("clothes_list.no_items_description")})]})}):i(ae,{children:[e("div",{className:"w-full flex-grow",children:e(Gt,{totalCount:(t==null?void 0:t.length)||0,overscan:4,components:{...En,Footer:()=>!s||a?null:e("div",{className:N("grid w-full grid-cols-2 gap-x-3 gap-y-4 pr-2 2xl:grid-cols-4",{"pt-4":t==null?void 0:t.length}),children:Array.from({length:pn}).map((I,D)=>e(Ks,{},D))})},className:"overflow-x-visible scrollbar-thin",itemContent:I=>{var z;const D=t==null?void 0:t[I];if(!D)return null;const F=(z=t==null?void 0:t[t.length-1])==null?void 0:z.id;return!a&&r&&F===D.id&&r(),e(Xs,{product:D,isInCart:v(D.id),isPreviewed:(m==null?void 0:m.id)===D.id,onAddToCartClick:()=>_(D),onRemoveFromCartClick:()=>j(D),onClick:()=>k(I),onMetadataEditClick:()=>x(I),onArmsChange:C=>o(D,C),onChangeIsInShop:C=>t[I].in_shop=C,onPreviewCancel:()=>{u(null),Ue(b)}},D.id)}})}),e(_n,{data:h!==null?t==null?void 0:t[h]:null,onClose:()=>S(null),onEdit:n})]})},On=({data:t})=>(c.exports.useState(!1),null),Zs=()=>{const{setIsLoading:t,menuData:r,setMenuData:s}=J();return{resetCharCreatorStructure:()=>{t(!0),w("resetCharCreatorStructure").then(n=>{const o=r.findIndex(d=>d.id==="head"),l=[...r];l[o]={...l[o],items:n},s(l),t(!1)})}}},$n=t=>{switch(t){case 1:case 2:case 10:return Ws;default:return gn}},er=c.exports.forwardRef(({className:t,...r},s)=>i(ys,{ref:s,className:N("relative flex w-full touch-none select-none items-center",t),...r,children:[e(ha,{className:"dark:bg-primary-dark relative h-2 w-full grow overflow-hidden rounded-full bg-slate-100",children:e(ga,{className:"absolute h-full bg-slate-900 dark:bg-white"})}),e(ba,{className:"dark:bg-gradient-text z-10 block h-5 w-5 rounded-full border-2 transition-colors focus-visible:outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 dark:border-primary dark:ring-offset-slate-950 dark:focus-visible:ring-slate-950"})]}));er.displayName=ys.displayName;const at=({label:t,max:r,min:s,minLabel:a,maxLabel:n,step:o,value:l,isValueDisplayed:d=!0,onChange:m,isGroupEnd:u,isGroupStart:p})=>i("div",{className:N("flex flex-col gap-2",{"!mt-6":p,"pb-12":u,"gap-1":a||n}),children:[i("div",{className:"flex items-center justify-between gap-2",children:[e("span",{className:"truncate",children:t}),d&&e("span",{children:l})]}),(a||n)&&i("div",{className:"flex justify-between text-xs",children:[e("span",{children:a}),e("span",{children:n})]}),e(er,{max:r,min:s,step:o,value:[l],onValueChange:g=>{oe(ne.SLIDER_CHANGE),m(g[0])}})]}),An=({label:t,min:r,max:s,step:a,value:n,onChange:o,isGroupStart:l,isGroupEnd:d,maxLabel:m,minLabel:u})=>e(at,{label:t,max:s,min:r,step:a,value:n,onChange:o,isValueDisplayed:!1,isGroupEnd:d,isGroupStart:l,maxLabel:m,minLabel:u}),zt=({onClick:t,disabled:r,icon:s})=>e("button",{className:N("flex aspect-square h-10 shrink-0 items-center justify-center rounded-md border-border bg-primary transition-colors hover:bg-primary-opacity",{"cursor-default opacity-30":r}),onClick:()=>{r||t()},children:s}),wt=({min:t=Number.MIN_SAFE_INTEGER,max:r=Number.MAX_SAFE_INTEGER,value:s,onChange:a,label:n,displayMax:o,id:l})=>{const d=c.exports.useRef(null),m=t===r,u=()=>{m||(s>t?a(s-1):s===t&&a(r))},p=()=>{m||(s<r?a(s+1):s===r&&a(t))},g=b=>{if(m)return;const f=parseInt(b.target.value);if(isNaN(f)){a(0);return}f<t?a(t):f>r?a(r):a(f)},v=b=>{var f;!((f=d.current)!=null&&f.contains(document.activeElement))||m||(b.preventDefault(),b.key==="ArrowRight"?p():b.key==="ArrowLeft"&&u())};return c.exports.useEffect(()=>(window.addEventListener("keyup",v),()=>{window.removeEventListener("keyup",v)}),[s]),i("div",{className:"space-y-2",ref:d,children:[e("label",{htmlFor:l,children:n}),i("div",{className:"flex items-center gap-1",children:[e(zt,{onClick:u,disabled:m,icon:e(Fr,{className:"size-6 text-white"})}),i("div",{className:"relative overflow-hidden",children:[e(_e,{className:"h-10",id:l,type:"tel",min:t,max:r,value:s,onChange:g}),o&&r<999999&&e("div",{className:"absolute right-0 top-0 mr-2 hidden h-10 flex-nowrap items-center overflow-hidden text-xs 2xl:flex",children:i("span",{className:"whitespace-nowrap",children:["/ ",r]})})]}),e(zt,{onClick:p,disabled:m,icon:e(zr,{className:"size-6 text-white"})})]})]})},Dn=t=>t?e(ze,{size:20,className:"shrink-0"}):e(Br,{size:20,className:"shrink-0"}),Pn=({isLoading:t,product:r,isForced:s})=>{const{t:a}=H(),{isUnset:n}=r||{};return t?e(Ks,{className:s?"h-12":void 0}):s?e("div",{className:"flex h-12 w-full items-center justify-center rounded-md bg-primary-dark-opacity p-2 text-center",children:r?e("div",{className:"text-fill w-full bg-gradient-text bg-clip-text text-center font-extrabold leading-4 text-transparent drop-shadow-lg transition-opacity group-hover:opacity-50",children:n?a("unset_item"):e(Ae,{value:r==null?void 0:r.price})}):e("span",{children:"-"})}):r?e(Xs,{product:r,disableControls:!0}):e("div",{className:"flex h-36 w-full items-center justify-center rounded-md bg-primary-dark-opacity p-2 text-center",children:a("id_only_mode.no_item_selected")})},tr=({componentId:t,onChange:r,isCharCreator:s})=>{var B;const{currentPedData:a}=J(),n=ot.includes(a==null?void 0:a.pedModel),{t:o}=H(),{addItem:l,removeItem:d,isItemInCart:m}=me(),{shopData:u}=J(),p=(B=u==null?void 0:u.modifiers)==null?void 0:B.IS_EVERYTHING_FREE,[g,v]=c.exports.useState(0),[b,f]=c.exports.useState(0),[h,S]=c.exports.useState(!0),[k,x]=c.exports.useState(null),[_,j]=c.exports.useState(null),{minDrawable:I,maxDrawable:D,minTexture:F,maxTexture:z}=k||{},C=_?m(_.id):!1,A=!_||h,G=t?qs.includes(t):!0,R=(_==null?void 0:_.is_blacklisted)||!1,X=(_==null?void 0:_.in_shop)||!1,K=s||n&&(R||!X),se=!s&&n&&(R||!X),re=async(O,q)=>{S(!0),!n&&s&&r&&t!==2?(r(O,q),S(!1)):(w("handleNumbersOnlyChange",{componentId:t,drawableId:O,textureId:q,shopName:u.type}).then(U=>{k&&(x({...k,maxTexture:U}),q>U&&f(U))}),t==2&&r&&r(O,q))},y=(O,q)=>o(O?q?"id_only_mode.remove":"id_only_mode.remove_from_cart":q?"id_only_mode.select":"id_only_mode.add_to_cart"),P=O=>{O!==g&&(v(O),f(0),re(O,0))},$=O=>{O!==b&&(f(O),re(g,O))};Q("setNumbersOnlyCurrentProduct",O=>{S(!1),t===O.componentId&&g===O.drawableId&&b===O.textureId&&j(O.item||null)});const te=async()=>{S(!0),await w("getNumbersOnlyData",{componentId:t,shopName:u.type}).then(O=>{x(O),v(O.currentDrawable||0),f(O.currentTexture||0),S(!1)})},M=()=>{!_||(C?d(_.id):l(_))};return c.exports.useEffect(()=>{t!==void 0&&(v(0),f(0),S(!1),x(null),j(null),te())},[t]),t===void 0?null:i("div",{className:"space-y-6 overflow-y-auto rounded-md bg-primary-opacity px-4 py-8  text-white scrollbar-thin",children:[i("div",{className:"flex flex-col justify-center gap-2 sm:flex-row",children:[e(wt,{label:o("id_only_mode.drawable"),id:"drawableId",value:g,onChange:P,min:I,max:D,displayMax:!0}),e(wt,{label:o("id_only_mode.texture"),id:"textureId",value:b,onChange:$,min:F,max:z,displayMax:!0})]}),i("div",{className:"flex flex-col items-center justify-center gap-2 text-lg",children:[i("div",{className:"flex w-full max-w-[150px] flex-col gap-2",children:[n&&e(Pn,{isLoading:h,product:_,isForced:G}),!K&&e(T,{variant:C?"destructive":"success",onClick:M,disabled:A,loading:h,children:i("div",{className:"flex items-center gap-2",children:[C?e(Ve,{size:20,className:"shrink-0"}):Dn(p),e("span",{children:y(C,p)})]})})]}),se&&i("div",{className:"max-w-[200px] rounded-md bg-primary-dark-opacity p-2 text-center text-sm",children:[R&&e("p",{children:o("id_only_mode.blacklisted")}),!R&&!X&&e("p",{children:o("id_only_mode.not_in_shop")})]})]})]})},nt=({onClick:t,variant:r,selected:s,isCompact:a,showId:n,label:o,id:l,imgSrc:d})=>{const m=l==null?void 0:l.split("_")[0];return e("div",{role:"button",onClick:t,className:N("flex w-full shrink cursor-pointer items-center justify-center overflow-hidden rounded-md border border-border bg-gradient-shine",{"h-48 p-4":r==="grid-item","h-36 px-4 py-4":r==="trigger","border-white":r==="grid-item"&&s,"h-12":a}),children:a?e("span",{className:"font-semibold drop-shadow-lg",children:o}):i("div",{className:"relative h-full w-full",children:[n&&m!==void 0&&m.length>0&&i("span",{className:"absolute -left-2 -top-2 z-50 text-xs text-text-mute",children:["ID: ",m]}),e($e,{src:d,className:"mx-auto h-full object-contain drop-shadow-lg"})]})})},Tn=({value:t,onChange:r})=>{const{hairData:s,currentPedData:a,isNumeralMode:n}=J(),o=ot.includes(a==null?void 0:a.pedModel),[l,d]=c.exports.useState(!1),m=s.find(u=>u.drawable_id===t);return!o||(s==null?void 0:s.length)===0||n?e(tr,{componentId:2,isCharCreator:!0,onChange:(u,p)=>{r(`2_${u}_${p}`)}}):e("div",{className:"grid max-w-48 grid-cols-1",children:i(Dt,{open:l,onOpenChange:d,modal:!0,children:[e(lt,{children:e(nt,{variant:"trigger",imgSrc:m==null?void 0:m.image_url})}),e(qe,{className:"w-full max-w-[600px]",children:e("div",{className:"grid grid-cols-4 gap-4",children:s.map(u=>e(nt,{variant:"grid-item",onClick:()=>{r(u.drawable_id)},selected:t===u.drawable_id,imgSrc:u.image_url},u.drawable_id))})})]})})},Rn="https://clothing.rcore.cz/assets/gamedata/heads/1885233650/",jn=".webp",Bt=t=>`${Rn}${t}${jn}`,Qe=({ids:t,value:r,onChange:s,isCompact:a,label:n,showId:o})=>{const[l,d]=c.exports.useState(!1);return i(Dt,{open:l,onOpenChange:d,modal:!0,children:[e(lt,{children:e(nt,{showId:o,id:r,variant:"trigger",isCompact:a,label:n,imgSrc:Bt(r)})}),e(qe,{className:"w-full max-w-[600px]",children:e("div",{className:"grid grid-cols-4 gap-4",children:t.map(m=>e(nt,{showId:o,id:m,variant:"grid-item",onClick:()=>{s(m)},selected:r===m,imgSrc:Bt(m)},m))})})]})},Fn=({maleIds:t,femaleIds:r,maleModel:s,femaleModel:a,modelBlend:n,maleTone:o,femaleTone:l,toneBlend:d,onMaleModelChange:m,onFemaleModelChange:u,onModelBlendChange:p,onMaleToneChange:g,onFemaleToneChange:v,onToneBlendChange:b})=>{const{t:f}=H(),h=t.map(C=>`${C}_${o}`),S=r.map(C=>`${C}_${l}`),k=Array.from({length:44}).map((C,A)=>`${s}_${A}`),x=Array.from({length:44}).map((C,A)=>`${a}_${A}`),_=C=>{const A=parseInt(C.split("_")[0]);m(A)},j=C=>{const A=parseInt(C.split("_")[0]);u(A)},I=C=>{const A=parseInt(C.split("_")[1]);g(A)},D=C=>{const A=parseInt(C.split("_")[1]);v(A)},F=C=>{p(C)},z=C=>{b(C)};return i("div",{className:"space-y-16",children:[i("div",{className:"space-y-6",children:[e("div",{className:"flex flex-col gap-2",children:i("div",{className:"flex flex-col gap-1 pt-4",children:[i("div",{className:"flex justify-between gap-4",children:[e("strong",{children:f("character.dad")}),e("strong",{children:f("character.mom")})]}),i("div",{className:"grid grid-cols-2 gap-4",children:[e(Qe,{ids:h,value:`${s}_${o}`,onChange:_,showId:!0}),e(Qe,{ids:S,value:`${a}_${l}`,onChange:j,showId:!0})]})]})}),e(at,{label:f("character.blend"),min:0,max:1,step:.025,value:n,onChange:F,isValueDisplayed:!1})]}),i("div",{className:"space-y-6",children:[i("div",{className:"flex flex-col gap-2",children:[e("h2",{className:"text-xl font-semibold",children:f("character.skin_tone_title")}),e("p",{className:"text-sm text-text-mute",children:f("character.skin_tone_description")}),i("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e(Qe,{ids:k,value:`${s}_${o}`,onChange:I,isCompact:!0,label:f("character.dad")}),e(Qe,{ids:x,value:`${a}_${l}`,onChange:D,isCompact:!0,label:f("character.mom")})]})]}),e(at,{label:f("character.blend"),min:0,max:1,step:.025,value:d,onChange:z,isValueDisplayed:!1})]})]})},sr=c.exports.forwardRef(({className:t,...r},s)=>e(Ns,{className:N("grid gap-2",t),...r,ref:s}));sr.displayName=Ns.displayName;const _t=c.exports.forwardRef(({className:t,...r},s)=>e(ws,{ref:s,className:N("aspect-square h-4 w-4 rounded-full border border-slate-200 border-slate-900 text-slate-900 ring-offset-white focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:border-slate-50 dark:text-slate-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",t),...r,children:e(xa,{className:"flex items-center justify-center",children:e(Lr,{className:"h-2.5 w-2.5 fill-current text-current"})})}));_t.displayName=ws.displayName;const Lt=20,zn=({value:t,onChange:r,options:s,label:a})=>{var n;return i(st,{value:t,onValueChange:r,children:[i("div",{className:"flex w-full flex-col gap-2",children:[a&&e("span",{className:"truncate pl-1",children:a}),e(Be,{children:e(rt,{children:(n=s.find(o=>o.value===t))==null?void 0:n.label})})]}),e(Le,{className:N({"h-64":s.length>Lt}),children:s.length<Lt?s.map(o=>e(xe,{value:o.value,children:o.label},o.value)):e(Gt,{overscan:4,data:s,className:"PedSelectVirtualList min-w-64 scrollbar-thin",totalCount:s.length,itemContent:o=>e(xe,{value:s[o].value,children:s[o].label},s[o].value)})})]})},Bn=({malePeds:t,femalePeds:r,value:s,onChange:a})=>{const{t:n}=H(),{shopData:o}=J(),l=g=>g!=null&&g.length?t.find(v=>v.hash.toString()===g)?"0":"1":"0",[d,m]=c.exports.useState(l(s)),u=d==="0"?t:r,p=()=>{var b;return(((b=o==null?void 0:o.modifiers)==null?void 0:b.ALLOW_ALL_PEDS)?u:u.filter(f=>ot.includes(f.hash))).map(f=>{var h;return{label:f.label,value:(h=f.hash)==null?void 0:h.toString()}})};return c.exports.useEffect(()=>{m(l(s))},[s]),i("div",{className:"space-y-6",children:[i(sr,{value:d,onValueChange:g=>m(g),className:"flex flex-wrap items-center justify-evenly",children:[i("div",{className:"flex items-center space-x-2",children:[e(_t,{value:"0",id:"0"}),e(Rt,{htmlFor:"0",children:n("character.male")})]}),i("div",{className:"flex items-center space-x-2",children:[e(_t,{value:"1",id:"1"}),e(Rt,{htmlFor:"1",children:n("character.female")})]})]}),e(zn,{value:s,onChange:a,options:p()})]})},Ln=({disabled:t,isLoading:r,categoryPrice:s,onConfirm:a,onUndo:n})=>{const{t:o}=H();return i("div",{className:"space-y-2",children:[i("div",{className:"flex w-full gap-2",children:[e(T,{className:"shrink-0 px-2 2xl:px-4",variant:"destructive",onClick:n,disabled:t,loading:r,children:e("div",{className:"flex items-center gap-2",children:e(ss,{className:"size-5 shrink-0"})})}),i("div",{className:N("flex min-h-10 w-full items-center justify-center gap-2 rounded-md border border-border bg-primary-dark-opacity px-6 py-1 transition-opacity 2xl:min-h-0 2xl:justify-between",{"opacity-80":t}),children:[i("span",{className:"text-fill hidden bg-gradient-text bg-clip-text text-lg font-extrabold leading-normal text-transparent drop-shadow-lg 2xl:inline",children:[o("shopping_cart.price"),":"]}),e(Ae,{value:s,className:"text-fill bg-gradient-text-green bg-clip-text text-lg font-extrabold leading-normal text-transparent drop-shadow-lg"})]})]}),i("div",{className:"grid w-full grid-cols-2 grid-rows-1 gap-2",children:[e(T,{className:"flex w-full items-center justify-center gap-2 rounded-md border border-border p-2 px-6",variant:"success",onClick:()=>a("bank"),disabled:t,loading:r,children:i("div",{className:"flex items-center gap-2",children:[e(rs,{className:"size-5 shrink-0"}),e("span",{className:"hidden text-nowrap 2xl:inline",children:o("shopping_cart.payment_bank")})]})}),e(T,{className:"flex w-full items-center justify-center gap-2 rounded-md border border-border p-2 px-6",variant:"success",onClick:()=>a("cash"),disabled:t,loading:r,children:i("div",{className:"flex items-center gap-2",children:[e(as,{className:"size-5 shrink-0"}),e("span",{className:"hidden text-nowrap 2xl:inline",children:o("shopping_cart.payment_cash")})]})})]})]})},Hn=({menuConfig:t,hasUnsavedChanges:r,onUnsavedChanges:s})=>{var re;const{setIsLoading:a,isLoading:n,currentPedData:o,setCurrentPedData:l,charFeaturesPrices:d,shopData:m}=J(),{resetCharCreatorStructure:u}=Zs(),{items:p}=me(),{items:g,headOverlayId:v,subtype:b,id:f}=t||{},{t:h}=H(),S=(re=m==null?void 0:m.modifiers)==null?void 0:re.IS_EVERYTHING_FREE,k=c.exports.useRef(null),[x,_]=c.exports.useState({});if(!t)return null;const I=((y,P)=>S||!d?0:y&&y in d?d[y]:P&&P in d?d[P]:0)(b,f),D=y=>{var P,$,te,M,B,O,q,U;if(f==="headblend"){const L=y.headblend;_({maleModel:L[0],femaleModel:L[1],modelBlend:L[6],maleTone:L[3],femaleTone:L[4],toneBlend:L[7]})}else if(f==="face_features")_(y.face);else if(f==="hair")_({number:y.hair||0,color:((P=y.hairColor[0])==null?void 0:P.toString())||"0",color_2:(($=y.hairColor[1])==null?void 0:$.toString())||"0"});else if(f==="nonfreemode_head")_({number:((te=y.components)==null?void 0:te[0][0])||0,number_2:((M=y.components)==null?void 0:M[0][1])||0});else if(f==="eye_color")_({type_eye_color:((B=y.eyeColor)==null?void 0:B.toString())||"0"});else if(f==="ped_select")_({ped_select:((O=y.pedModel)==null?void 0:O.toString())||"1885233650"});else if(v!==void 0){const L=y.headOverlay[v];_(L?{color:(q=L==null?void 0:L[2])==null?void 0:q.toString(),color_2:(U=L==null?void 0:L[3])==null?void 0:U.toString(),size:L!=null&&L[4]?Math.round(L[4]*10):0,number:(L==null?void 0:L[0])===255?-1:L==null?void 0:L[0]}:{})}else _({});s(!1)},F=()=>{a(!1),oe(ne.PURCHASE),w("notify",{title:h("notifications.changes_saved")}),w("getCurrentPedData").then(y=>{l(y),D(y),s(!1)})},z=()=>{a(!1),oe(ne.PURCHASE_FAIL),w("notify",{title:h("notifications.insufficient_funds"),isError:!0})},C=y=>{y?F():z()},A=(y,P)=>{const $={...x,[P]:y};f==="nonfreemode_head"&&P==="number"&&($.number_2=0),_($),v!==void 0&&b===Y.HeadOverlay?w("previewHeadOverlay",{headOverlayId:v,values:$}):f==="nonfreemode_head"?(w("previewNonFreemodeHead",{values:$}),u()):b===Y.Hair?w("previewHair",{values:$}):b===Y.EyeColor?w("previewEyeColor",{values:$}):b===Y.Headblend?w("previewHeadBlend",{maleModel:$.maleModel,femaleModel:$.femaleModel,modelBlend:$.modelBlend,maleTone:$.maleTone,femaleTone:$.femaleTone,toneBlend:$.toneBlend}):b===Y.PedSelect&&w("previewPed",{ped:typeof y=="string"?parseInt(y):y}),s(!0)},G=(y,P)=>{_({...x,[P]:y}),w("previewFaceFeature",{faceFeatureId:P,value:y}),s(!0)},R=y=>{if(v!==void 0&&b===Y.HeadOverlay)a(!0),w("confirmHeadOverlay",{headOverlayId:v,values:x,paymentType:y}).then(C);else if(f==="nonfreemode_head")a(!0),w("confirmHead",{values:x,paymentType:y}).then(C);else if(b===Y.Hair)a(!0),w("confirmHair",{values:x,paymentType:y}).then(C);else if(b===Y.EyeColor)a(!0),w("confirmEyeColor",{values:x,paymentType:y}).then(C);else if(b===Y.Headblend)a(!0),w("confirmHeadBlend",{maleModel:x.maleModel,femaleModel:x.femaleModel,modelBlend:x.modelBlend,maleTone:x.maleTone,femaleTone:x.femaleTone,toneBlend:x.toneBlend,paymentType:y}).then(C);else if(b===Y.FaceFeatures)a(!0),w("confirmFaceFeaturse",{values:x,paymentType:y}).then(C);else if(b===Y.PedSelect){a(!0);const P=x.ped_select||o.pedModel;w("confirmPed",{ped:typeof P=="string"?parseInt(P):P,paymentType:y}).then($=>{$?(F(),u()):z()})}},X=()=>{D(o),Ue(p)},K=!Object.keys(x).length||n||!r,se=(y,P)=>{var $,te;if(Da(y)){const{description:M,title:B,id:O}=y;return B!=null&&B.length?i("div",{className:"space-y-1",children:[e("h2",{className:"text-lg font-semibold",children:B}),!!M.length&&e("p",{className:"whitespace-pre-wrap text-sm text-text-mute",children:M})]},O):e("p",{className:"!mt-3 whitespace-pre-wrap text-sm text-text-mute",children:M},O)}if(Ma(y))return e(Fn,{maleIds:y.maleIds,femaleIds:y.femaleIds,maleModel:x.maleModel||y.maleIds[0],femaleModel:x.femaleModel||y.femaleIds[0],modelBlend:($=x.modelBlend)!=null?$:.5,maleTone:x.maleTone||0,femaleTone:x.femaleTone||0,toneBlend:(te=x.toneBlend)!=null?te:.5,onMaleModelChange:M=>A(M,"maleModel"),onFemaleModelChange:M=>A(M,"femaleModel"),onModelBlendChange:M=>A(M,"modelBlend"),onMaleToneChange:M=>A(M,"maleTone"),onFemaleToneChange:M=>A(M,"femaleTone"),onToneBlendChange:M=>A(M,"toneBlend")},t.id);if(Ea(y)){const{malePeds:M,femalePeds:B}=y;return e(Bn,{malePeds:M,femalePeds:B,value:x[y.type],onChange:O=>A(O,y.type)},y.type)}if(Ia(y))return e(An,{...y,value:x[y.faceFeatureId]||0,onChange:M=>G(M,y.faceFeatureId)},y.faceFeatureId);if($a(y)){const{label:M,min:B,max:O,type:q,minLabel:U,maxLabel:L}=y,ee=x[q]||0;return i("div",{className:"space-y-4",children:[e(at,{label:M,max:O,min:B,step:1,value:ee,onChange:ue=>A(ue,q),isValueDisplayed:!1,minLabel:U,maxLabel:L}),ee===0&&e("div",{className:"text-xs text-orange-400",children:h("exceptions.size_set_to_zero")})]},P)}if(jt(y)&&b==="hair"){const{type:M}=y;return e("div",{className:"space-y-4",children:e(Tn,{value:x[M],onChange:B=>A(B,M)})},P)}else if(jt(y)){const{label:M,min:B,max:O,type:q}=y,U=x[q]||0;return i("div",{className:"space-y-4",children:[e(wt,{label:M,id:q,min:B,max:O,value:U,onChange:L=>A(L,q)}),U===B&&e("div",{className:"text-xs text-orange-400",children:h("exceptions.style_set_to_first")})]},P)}if(Oa(y)){const{label:M,type:B}=y;let O={red:"red",green:"green"};return b===Y.Hair?O=Ws:b===Y.HeadOverlay&&(O=$n(v)),e(Nt,{availableColors:O,selectedColors:[x[B]],label:M,onChange:q=>{A(q,B)}},P)}if(Aa(y)){const{label:M,type:B,options:O}=y;return e(Nt,{availableColors:O,selectedColors:[x[B]],label:M,onChange:q=>A(q,B)},P)}};return c.exports.useEffect(()=>{k!=null&&k.current&&(k.current.scrollTop=0),D(o)},[f]),i("div",{className:"flex flex-grow flex-col gap-2",children:[i("div",{ref:k,className:"flex-grow space-y-4 overflow-y-auto rounded-md bg-primary-opacity p-6 pb-12 text-white scrollbar-thin",children:[e("h2",{className:"text-xl font-semibold",children:t==null?void 0:t.label}),e("div",{className:"space-y-8",children:g==null?void 0:g.map((y,P)=>se(y,P))})]}),I>0?e(Ln,{categoryPrice:I,onConfirm:R,disabled:K,onUndo:X,isLoading:n}):i("div",{className:"grid grid-cols-1 grid-rows-2 gap-2 2xl:grid-cols-2 2xl:grid-rows-1",children:[e(T,{className:"shrink-0",variant:"destructive",onClick:X,disabled:K,loading:n,children:i("div",{className:"flex items-center gap-2",children:[e(ss,{className:"size-5 shrink-0"}),e("span",{children:h("character.undo")})]})}),e(T,{className:"shrink-0",variant:"success",onClick:()=>R(),disabled:K,loading:n,children:i("div",{className:"flex items-center gap-2",children:[e(Kt,{className:"size-5 shrink-0"}),e("span",{children:h("character.save")})]})})]})]})},Vn=({items:t,onClick:r,onHomeClick:s,disabled:a})=>i("div",{className:N("flex items-center gap-3",{"opacity-50":a}),children:[s&&e("button",{onClick:()=>{a||(oe(ne.BACK),s())},disabled:a,children:e(Hr,{className:"size-5 text-white"})}),t==null?void 0:t.map((n,o)=>i(ae,{children:[e("button",{className:N("truncate whitespace-nowrap text-text",{"font-bold":n.id===t[t.length-1].id}),disabled:a,onClick:()=>{oe(ne.BACK),r(n.id)},children:n.name}),o<t.length-1&&e("span",{className:"text-text",children:">"})]},n.id))]}),Un=({colorFilter:t,searchFilter:r,onlyAddonFilter:s,onClearFilters:a,showOnlyStockFilter:n,notInAnyShopFilter:o,numOfFilters:l})=>{const{t:d}=H(),{availableColors:m,selectedColors:u,onColorSelect:p}=t||{},{searchQuery:g,onSearchQueryChange:v}=r||{},[b,f]=c.exports.useState(g||""),h=t||r,S=Object.entries(m||{});if(!h)return null;const k=x=>{x!==g&&(v==null||v(x))};return c.exports.useEffect(()=>{f(g||"")},[g]),i(Dt,{children:[i(lt,{className:"flex shrink-0 items-center gap-2 font-medium text-text",children:[e(Vr,{className:"size-5 shrink-0"})," ",d("filters.button"),l?` (${l})`:""]}),i(qe,{className:"flex w-max max-w-lg flex-col gap-6",align:"end",children:[r&&i("div",{className:"space-y-4",children:[i("span",{className:"font-medium",children:["Filters ",l?` (${l})`:""]}),i("div",{className:"flex items-center",children:[i("div",{className:"relative",children:[e(_e,{type:"text",placeholder:d("filters.search_placeholder"),className:"h-10 w-full rounded-md rounded-r-none border border-r-0 border-border bg-primary-dark p-2 pr-8 text-text",value:b,onChange:x=>f(x.target.value),onKeyUp:x=>x.code==="Enter"&&(k==null?void 0:k(b))}),e("div",{role:"button",className:N("absolute right-2 top-1/2 -mx-2 -translate-y-1/2 transform cursor-pointer p-2 opacity-100 transition-opacity",{"opacity-0":!b}),onClick:()=>{f(""),k==null||k("")},children:e(Oe,{className:" size-5"})})]}),i(T,{onClick:()=>k==null?void 0:k(b),className:"h-10 rounded-l-none border-border",disabled:g===b,contentClassName:"gap-2",children:[e("span",{children:d("filters.search_button")}),e(Ur,{className:"size-4"})]})]})]}),t&&m&&!!S.length&&i("div",{className:"space-y-2",children:[e("span",{className:"font-medium",children:d("filters.color")}),e("div",{className:"flex flex-wrap gap-2",children:S.map(([x,_])=>e(Qs,{color:_,selected:u==null?void 0:u.includes(x),onClick:()=>p==null?void 0:p(x),isSmall:!0},x))})]}),s&&e(Fe,{id:"onlyAddons",name:"onlyAddons",checked:s==null?void 0:s.onlyAddons,onCheckedChange:x=>{s==null||s.onOnlyAddonsChange(!!x)},label:d("filters.only_addons")}),(n||o)&&i("div",{className:"space-y-2",children:[i("div",{className:"flex gap-2",children:[e(Zt,{className:"mt-0.5 size-4 shrink-0 text-text-mute"}),e("p",{className:"text-sm text-text-mute",children:d("filters.stock_mgmt_filters")})]}),n&&e(Fe,{id:"showOnlyStockInShopMgmt",name:"showOnlyStockInShopMgmt",checked:n==null?void 0:n.showOnlyStockInShopMgmt,onCheckedChange:x=>{var _;(_=n==null?void 0:n.onShowOnlyStockInShopMgmtChange)==null||_.call(n,!!x)},label:d("filters.only_stock_in_shop_mgmt")}),o&&e(Fe,{id:"notInAnyShop",name:"notInAnyShop",checked:o==null?void 0:o.notInAnyShop,onCheckedChange:x=>{var _;(_=o==null?void 0:o.onNotInAnyShopChange)==null||_.call(o,!!x)},label:d("filters.not_in_any_shop")})]}),i(T,{onClick:a,className:"w-fit self-end text-right",disabled:!l,type:"button",contentClassName:"gap-2",children:[e(Gr,{className:"size-4"}),e("span",{children:d("filters.clear_filters")})]})]})]})},Gn=({items:t,onClick:r,onHomeClick:s,filters:a,disabled:n})=>{const o=!(t!=null&&t.length)||n,l=()=>{if(!o){if(oe(ne.BACK),(t==null?void 0:t.length)<2){s();return}r(t==null?void 0:t[t.length-2].id)}};return i("nav",{className:"flex h-10 w-full items-center gap-4 overflow-hidden rounded-md bg-primary-opacity pr-4",children:[e("button",{className:N("flex aspect-square h-full shrink-0 items-center justify-center rounded-md bg-primary",{"cursor-default opacity-30":o}),onClick:l,children:e(qr,{className:"size-6 text-white"})}),i("div",{className:"flex w-full items-center justify-between gap-4",children:[e(Vn,{items:t,onClick:r,onHomeClick:s,disabled:n}),a&&e(Un,{...a})]})]})},be=({type:t,onClick:r})=>{let s=null;switch(t){case"select":s=e(Ee,{className:"size-5 text-green-500"});break;case"preview":s=e(ts,{className:"size-5 text-cyan-400"});break;case"remove":s=e(Ve,{className:"size-5 text-red-500"});break;case"buy":s=e(Me,{className:"size-5 text-green-500"});break;case"edit":s=e(es,{className:"size-5 text-yellow-400"});break}return e("button",{onClick:r,className:"aspect-square shrink-0 rounded-full bg-primary-dark p-2 transition-colors hover:bg-primary-dark-opacity",children:s})},qn=(t,r,s)=>{w("selectOutfit",{id:t,outfit:r}),w("notify",{title:s})},ht=(t,r,s)=>{w("previewOutfit",{id:t,outfit:r}),w("notify",{title:s})},Ht=(t,r,s)=>{w("removeOutfit",{id:t,type:r}).then(()=>{s(t)})},Yn=(t,r,s)=>{w("buyOutfit",{id:t,outfit:r}),w("notify",{title:s})},Jn=({...t})=>{const{t:r}=H(),{id:s,name:a,price:n,outfit:o,type:l,onRemove:d,nonPurchaseable:m,canRemove:u}=t,{isEditMetaData:p,isOutfitDialogOpen:g,setIsOutfitDialogOpen:v}=Ge(),{resetCharCreatorStructure:b}=Zs();return i(ae,{children:[i("div",{role:"button",className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-border bg-primary-dark-opacity px-4 py-2 transition-colors hover:border-border-hover",onClick:()=>ht(s,o,r("notifications.outfit_previewing")),children:[e("span",{className:"font-medium",children:a}),i("div",{className:"flex flex-wrap items-center gap-2",children:[(l===Y.MyOutfits||m)&&e(be,{type:"select",onClick:f=>{f.stopPropagation(),qn(s,o,r("notifications.outfit_put_on")),b()}}),l===Y.MyOutfits?i(ae,{children:[e(be,{type:"preview",onClick:f=>{f.stopPropagation(),ht(s,o,r("notifications.outfit_previewing"))}}),e(be,{type:"remove",onClick:f=>{f.stopPropagation(),Ht(s,l,d)}})]}):i(ae,{children:[p&&e(be,{type:"edit",onClick:f=>{f.stopPropagation(),v(!0)}}),e(be,{type:"preview",onClick:f=>{f.stopPropagation(),ht(s,o,r("notifications.outfit_previewing"))}}),u&&e(be,{type:"remove",onClick:f=>{f.stopPropagation(),Ht(s,l,d)}}),!m&&i("div",{className:"flex shrink-0 items-center gap-2 rounded-full bg-primary-opacity pl-4",children:[e(Ae,{value:n,className:"text-fill bg-gradient-text bg-clip-text font-bold leading-normal text-transparent drop-shadow-lg"}),e(be,{type:"buy",onClick:f=>{f.stopPropagation(),Yn(s,o,r("notifications.outfit_purchased"))}})]})]})]})]}),p&&e(Us,{data:t,isOpen:g,onClose:()=>v(!1),onSaved:()=>w("notify",{title:r("notifications.outfit_updated")})})]})},Wn=({})=>i("div",{className:"flex min-h-14 flex-wrap items-center justify-between gap-2 rounded-lg border border-border bg-primary-dark-opacity px-4 py-2 transition-colors hover:border-border-hover",children:[e(je,{className:"h-6 w-1/3"}),i("div",{className:"flex flex-wrap items-center gap-2",children:[e(je,{className:"aspect-square size-9 shrink-0 rounded-full"}),e(je,{className:"aspect-square size-9 shrink-0 rounded-full"}),e(je,{className:"aspect-square size-9 shrink-0 rounded-full"})]})]}),Qn=({outfits:t,type:r,onOutfitRemove:s,loading:a,title:n})=>{var g;const{shopData:o,permissions:l}=J(),{t:d}=H(),m=(g=o==null?void 0:o.modifiers)==null?void 0:g.JOB_CHANGING_ROOM,u=r===Y.MyOutfits,{canUseOutfitEditor:p}=l;return e("div",{className:"flex flex-grow flex-col gap-2",children:i("div",{className:"flex-grow space-y-4 overflow-y-auto rounded-md bg-primary-opacity p-6 text-white scrollbar-thin",children:[e("h2",{className:"text-xl font-semibold",children:n}),e("div",{className:"flex flex-col gap-2",children:a?Array.from({length:5}).map((v,b)=>e(Wn,{},b)):t!=null&&t.length?t==null?void 0:t.map(v=>e(Jn,{type:u?Y.MyOutfits:Y.GlobalOutfits,onRemove:s,nonPurchaseable:m,canRemove:p,...v},v.id)):e("div",{className:"flex h-min min-h-20 w-full items-center justify-center rounded-md bg-primary-opacity text-white",children:i("div",{className:"flex h-full flex-col items-center justify-center gap-2 px-6 py-8 text-center",children:[e("strong",{children:d("outfits.no_outfits")}),e("p",{className:"text-sm",children:d("outfits.no_outfits_description")})]})})})]})})},Xe=({icon:t,title:r,description:s,type:a})=>i("div",{className:"space-y-2 text-text",children:[i("div",{className:"flex items-center gap-2",children:[i("div",{className:"relative",children:[e(t,{className:N("absolute left-0 top-0",{"text-warning":a==="warning","text-error":a==="danger","text-sky-400":a==="normal"})}),e(t,{className:N("shrink-0 animate-ping",{"text-warning":a==="warning","text-error":a==="danger","text-sky-400":a==="normal"})})]}),e("h3",{className:"text-xl font-medium",children:r})]}),e("p",{className:"text-sm",children:s})]}),Xn=({description:t})=>{const{isOutfitEditor:r,isStockManagement:s,isAdminMode:a,isNumeralMode:n}=J(),{t:o}=H();return r?e(Xe,{icon:It,title:o("admin_mode.outfit_editor.shop_title"),description:o("admin_mode.outfit_editor.shop_description"),type:"warning"}):s?e(Xe,{icon:Jt,title:o("admin_mode.stock_management.shop_title"),description:o("admin_mode.stock_management.shop_description"),type:"warning"}):a?e(Xe,{icon:Yt,title:o("admin_mode.shop_title"),description:o("admin_mode.shop_description"),type:"danger"}):n?e(Xe,{icon:Xt,title:o("id_only_mode.shop_title"),description:o("id_only_mode.shop_description"),type:"normal"}):e("p",{className:"line-clamp-4 text-sm text-text-inactive",children:t})},Kn=({imgSrc:t,description:r})=>i("div",{className:"flex items-center gap-8 2xl:gap-16",children:[e("img",{src:t,alt:"logo",className:"max-h-16 max-w-20 shrink-0 2xl:max-w-40"}),e("div",{className:"pr-4",children:e(Xn,{description:r})})]}),Zn=({onNumeralModeChange:t})=>{var Pt;const{t:r}=H(),{menuData:s,shopData:a,isStockManagement:n,isOutfitEditor:o,menuFirstLevelSelected:l,menuSecondLevelSelected:d,setMenuFirstLevelSelected:m,setMenuSecondLevelSelected:u,clothingCategories:p,isNumeralMode:g,isGroupByDrawable:v,currentPedData:b}=J(),{firstLevelItem:f,secondLevelItem:h,secondLevelData:S,isClothingSelected:k,isHeadFirstLevel:x,isHeadSubtypeSelected:_,isOutfitFirstLevel:j,isOutfitSubtypeSelected:I}=Et(),D=a==null?void 0:a.type,[F,z]=c.exports.useState([]),[C,A]=c.exports.useState([]),[G,R]=c.exports.useState(!1),[X,K]=c.exports.useState(!1),[se,re]=c.exports.useState(!1),[y,P]=c.exports.useState(!1),[$,te]=c.exports.useState([]),[M,B]=c.exports.useState(""),[O,q]=c.exports.useState([]),[U,L]=c.exports.useState(!1),[ee,ue]=c.exports.useState(!1),[le,De]=c.exports.useState(!1),Ye=bn(f,h),ct=[...$,M,U,ee,le].filter(E=>!!E).length;Q("resetClothingItemById",E=>{const V=C.findIndex(Z=>Z.id===E);V!==-1&&(C[V]={...C[V],image:void 0,label:""})});const Pe=dn({isClothingSelected:k,selectedItem:h,isNumeralMode:g,playerPedHash:b.pedModel,shopData:a}),Je=E=>{G||(te([]),B(""),q([]),L(!1),ue(!1),De(!1),E&&pe({componentId:h==null?void 0:h.component,resetItems:!0}))},ke=()=>{A([]),K(!1),Je(),P(!1)},dt=E=>{Ye.findIndex(Z=>Z.id===E)===0&&(u(null),ke())},cr=()=>{m(null),u(null),ke()},pe=async E=>{const{componentId:V,selectedCategories:Z,resetItems:ce,colors:fe,searchQuery:mt,onlyAddons:ut,showOnlyStockInShopMgmt:Nr,notInAnyShop:wr}=E;ce&&(A([]),K(!1)),!G&&V&&(ce||!X)&&setTimeout(async()=>{var Tt;R(!0);const Te=await Ys({shopType:D,componentId:V,lastId:ce||(Tt=C[C.length-1])==null?void 0:Tt.id,category:Z==null?void 0:Z[0],colors:fe,searchQuery:mt,fetchAllItems:o||n?!Nr:!1,groupByDrawable:v,onlyAddons:ut,notInAnyShop:n?wr:!1,isFirstFetch:ce,externalServerData:a.externalServerData,pedModel:b.pedModel});Te!=null&&Te.length?(A(ce?Te:_r=>[..._r,...Te]),K(!1)):K(!0),R(!1)},0)},dr=async E=>{re(!0),await w("getOutfits",{type:E,shopName:D},[{name:"Rcore merch",price:10230,id:1,outfit:{}}]).then(V=>{Array.isArray(V)&&z(V||[]),re(!1)})},mr=E=>{l===E||G||y||(m(E),u(null),ke())},ur=E=>{if(d===E||G||y)return;const V=S.find(Z=>Z.id===E);!V||(u(E),ke(),pe({componentId:V.component,resetItems:!0,onlyAddons:U}),$s(V.subtype)&&(z([]),dr(V.subtype)))},pr=E=>{if(G||y)return;const V=O.includes(E)?O.filter(Z=>Z!==E):[E];q(V),pe({componentId:h==null?void 0:h.component,selectedCategories:V,resetItems:!0,colors:$,searchQuery:M,onlyAddons:U,showOnlyStockInShopMgmt:ee,notInAnyShop:le}),P(!1)},We=mn(h==null?void 0:h.component,p),fr=s.map((E,V)=>({id:E.id,label:E.label,image:E.image})),hr=S.map((E,V)=>({id:E.id,label:E.label,image:E.image})),gr=We.map((E,V)=>({id:E.name,key:`${E.name}-${V}`,label:E.label,image:E.image})),br=k?xn({selectedColors:$,onColorSelect:E=>{if(G)return;const V=$;let Z=V;V.includes(E)?Z=V.filter(ce=>ce!==E):Z=[...V,E],pe({componentId:h==null?void 0:h.component,selectedCategories:O,resetItems:!0,colors:Z,searchQuery:M,onlyAddons:U,showOnlyStockInShopMgmt:ee,notInAnyShop:le}),te(Z)},searchQuery:M,onSearchQueryChange:E=>{G||(B(E),pe({componentId:h==null?void 0:h.component,selectedCategories:O,resetItems:!0,colors:$,searchQuery:E,onlyAddons:U,showOnlyStockInShopMgmt:ee,notInAnyShop:le}))},onClearFilters:()=>Je(!0),numOfFilters:ct,onlyAddons:U,onOnlyAddonsChange:E=>{G||(L(E),pe({componentId:h==null?void 0:h.component,selectedCategories:O,resetItems:!0,colors:$,searchQuery:M,onlyAddons:E,showOnlyStockInShopMgmt:ee,notInAnyShop:le}))},showOnlyStockInShopMgmt:ee,onShowOnlyStockInShopMgmtChange:n?E=>{G||(ue(E),pe({componentId:h==null?void 0:h.component,selectedCategories:O,resetItems:!0,colors:$,searchQuery:M,onlyAddons:U,showOnlyStockInShopMgmt:E,notInAnyShop:le}))}:void 0,notInAnyShopFilter:le,onNotInAnyShopChange:n?E=>{G||(De(E),pe({componentId:h==null?void 0:h.component,selectedCategories:O,resetItems:!0,colors:$,searchQuery:M,onlyAddons:U,showOnlyStockInShopMgmt:ee,notInAnyShop:E}))}:void 0}):void 0,xr=(E,V)=>{const{id:Z,...ce}=E,fe=C.findIndex(ut=>ut.id===Z);if(fe===-1)return;const mt=V?void 0:C[fe].image;C[fe]={...C[fe],...ce,image:mt}},vr=E=>{z(F.filter(V=>V.id!==E))},yr=(E,V)=>{const{id:Z}=E,ce=C.findIndex(fe=>fe.id===Z);ce!==-1&&(C[ce]={...C[ce],recommended_arms:V})};return c.exports.useEffect(()=>{t(Pe)},[Pe]),c.exports.useEffect(()=>{ue(!1),De(!1)},[n]),i("div",{className:"flex h-full flex-col gap-y-4",children:[e(On,{data:[{selectedColors:$,searchQuery:M,selectedClothingCategories:O},{menuFirstLevelSelected:l,menuSecondLevelSelected:d,secondLevelItemSubtype:h==null?void 0:h.subtype,isClothing:k,isHead:x,isHeadSubtypeSelected:_,selectedComponent:h==null?void 0:h.component,isHeadFirstLevel:x}]}),e(Kn,{imgSrc:`img/${a.logo||"logo.webp"}`,description:(Pt=a.description)!=null&&Pt.length?a.description:r("shop_description_placeholder")}),e("div",{className:"pt-4",children:e(Gn,{items:Ye,onHomeClick:cr,onClick:dt,filters:br,disabled:y&&x})}),i("div",{className:N("flex flex-grow flex-col gap-2 overflow-x-auto overflow-y-hidden pr-2"),children:[e(ft,{className:"flex shrink-0 flex-row flex-wrap gap-2 overflow-y-auto pb-2",categories:fr,onCategoryClick:mr,selectedCategories:[l],disabled:x&&y,isCompact:l!==null}),i("div",{className:N("flex flex-grow flex-col gap-2 space-y-0 overflow-hidden",{"flex-row":x||j}),children:[e("div",{className:"shrink-0 overflow-auto pr-2 scrollbar-thin",children:e(ft,{className:N("flex flex-row flex-wrap gap-2 pb-2 transition-opacity",{"grid h-fit w-fit grid-cols-1 gap-4 2xl:grid-cols-2":x,"grid h-fit w-fit grid-cols-1 gap-4":j}),categories:hr,onCategoryClick:ur,selectedCategories:[d],disabled:x&&y,isCompact:d!==null&&!x&&!j})}),Pe?e(tr,{componentId:h==null?void 0:h.component}):i("div",{className:"flex flex-grow gap-4 overflow-hidden",children:[!!(We!=null&&We.length)&&e("div",{className:"flex shrink-0 gap-2 overflow-y-auto pr-2 scrollbar-thin",children:e(ft,{className:"space-y-4",categories:gr,onCategoryClick:pr,selectedCategories:O,disabled:x&&y})}),k&&e(Mn,{items:C,onFetchMore:()=>pe({componentId:h==null?void 0:h.component,selectedCategories:O,resetItems:!1,colors:$,searchQuery:M,onlyAddons:U,showOnlyStockInShopMgmt:ee,notInAnyShop:le}),isAllItemsLoaded:X,isLoading:G,onEditMetadata:xr,onArmsChange:yr,firstLevelCategory:l,secondLevelCategory:d}),_&&e(Hn,{menuConfig:h,hasUnsavedChanges:y,onUnsavedChanges:P}),I&&e(Qn,{type:h==null?void 0:h.subtype,outfits:F,onOutfitRemove:vr,loading:se,title:h==null?void 0:h.label})]})]})]})]})},eo=({})=>{const[t,r]=c.exports.useState(null),[s,a]=c.exports.useState(!1);Q("showPipelineConfirmDialog",r);const n=o=>{w("pipelineConfirmResult",o),r(null)};return i(ae,{children:[e("style",{children:`
        .PipelineDialog .DialogClose {
            display:none;
        }
        `}),e(Ce,{open:!!(t!=null&&t.length),onOpenChange:o=>!o&&n(!1),children:e(ge,{className:"PipelineDialog w-full max-w-2xl",children:i("div",{className:"flex h-full w-full flex-col justify-center gap-16 overflow-hidden",children:[e("div",{className:"max-h-96",children:e($e,{onLoad:()=>a(!0),className:"mx-auto aspect-video h-auto w-auto object-contain",src:t||""})}),i("div",{className:"flex w-full flex-col justify-center gap-8  overflow-hidden",children:[i("div",{className:"overflow-y-auto scrollbar-thin",children:[e("p",{className:"text-lg font-medium",children:"\u2757 Before processing starts, please confirm this image looks correct"}),i("ul",{className:"list-disc pl-6",children:[e("li",{children:e("i",{children:"\u{1F449} The picture can be blurred, that is not an error."})}),e("li",{children:"It is correctly cropped"}),e("li",{children:"background is transparent (not green)"}),e("li",{children:"Ped's head is NOT visible"}),e("li",{children:"Nothing but the clothing item is visible (i.e. radar, text on screen, ...)"}),e("li",{children:"The clothing item is centered"})]})]}),i("div",{className:"flex justify-center gap-16",children:[e(T,{disabled:!s,variant:"destructive",onClick:()=>n(!1),children:"Cancel"}),e(T,{disabled:!s,variant:"success",onClick:()=>n(!0),children:"Confirm"})]})]})]})})})]})},to=({disableCheckout:t,disableConfirm:r,outfitName:s,saveAsOutfit:a})=>{var b;const{t:n}=H(),{setIsCheckoutLoading:o,isCheckoutLoading:l,shopData:d}=J(),{items:m,totalPrice:u,clearCart:p}=me(),g=(b=d==null?void 0:d.modifiers)==null?void 0:b.IS_EVERYTHING_FREE,v=(f,h,S)=>{S&&r||!S&&t||(o(!0),a&&Ue(h),w("attemptCheckout",{type:f,items:h,outfitName:a?s:null,shopName:d.type}))};return Q("checkoutResult",f=>{o(!1),f?(p(!0),oe(ne.PURCHASE),w("close",{forceClose:!0})):(oe(ne.PURCHASE_FAIL),w("notify",{title:n("notifications.insufficient_funds"),isError:!0}))}),i(ae,{children:[!g&&i("div",{className:"flex w-full justify-between gap-2 px-4 pt-1",children:[i("span",{className:"text-fill bg-gradient-text bg-clip-text text-lg font-extrabold leading-normal text-transparent drop-shadow-lg",children:[n("shopping_cart.total"),":"]}),e(Ae,{value:u,className:"text-fill bg-gradient-text-green bg-clip-text text-lg font-extrabold leading-normal text-transparent drop-shadow-lg"})]}),e("div",{className:N("grid w-full grid-cols-2 gap-4",{"grid-cols-1":g}),children:g?e(T,{className:"flex w-full items-center justify-center gap-2 rounded-md border border-border bg-primary-dark-opacity p-2 text-white transition-all hover:bg-primary-dark",disabled:r,loading:l,variant:"default",onClick:()=>v("cash",m,!0),children:i("div",{className:"flex items-center gap-2",children:[e(Yr,{className:"size-5 shrink-0"}),e("span",{children:n("shopping_cart.confirm_and_close")})]})}):i(ae,{children:[e(T,{onClick:()=>v("bank",m),className:"flex w-full items-center justify-center gap-2 rounded-md border border-border bg-primary-dark-opacity p-2 text-white transition-all hover:bg-primary-dark",disabled:t,loading:l,children:i("div",{className:"flex items-center gap-2",children:[e(rs,{className:"size-5 shrink-0"}),e("span",{children:n("shopping_cart.payment_bank")})]})}),e(T,{onClick:()=>v("cash",m),className:"flex w-full items-center justify-center gap-2 rounded-md border border-border bg-primary-dark-opacity p-2 text-white transition-all hover:bg-primary-dark",disabled:t,loading:l,children:i("div",{className:"flex items-center gap-2",children:[e(as,{className:"size-5 shrink-0"}),e("span",{children:n("shopping_cart.payment_cash")})]})})]})})]})},so=({imgSrc:t,name:r,price:s,categoryName:a,isUnset:n,onRemoveClick:o})=>{const{t:l}=H(),{isCheckoutLoading:d}=J();return i("div",{className:"flex animate-pop-in gap-2 rounded-md border border-border bg-gradient-shine p-1.5",children:[e("div",{className:"flex aspect-square h-16 shrink-0 items-center justify-center rounded-md bg-primary-opacity p-2",children:e($e,{src:n?"img/unsetcard.webp":t,alt:r,className:"h-12 object-contain"})}),i("div",{className:"flex w-full flex-col justify-between",children:[i("div",{className:"flex justify-between gap-2",children:[i("div",{children:[(r||n)&&e("h3",{className:"truncate text-sm font-medium text-text",children:n?l("unset_item"):r}),e("h4",{className:"truncate text-xs text-text-inactive",children:a!=null?a:""})]}),e(T,{className:"aspect-square h-8 shrink-0 rounded-md border border-border bg-primary-dark-opacity p-1 text-white transition-all hover:bg-primary-dark",onClick:o,disabled:d,children:e(Ve,{className:"size-4 text-white"})})]}),e(Ae,{className:"text-fill self-end truncate bg-gradient-text bg-clip-text text-sm font-extrabold leading-4 text-transparent drop-shadow-lg",value:s})]})]})},ro=({})=>{const{t}=H(),{menuData:r}=J(),{items:s,removeItem:a}=me(),n=c.exports.useCallback(l=>{if(!l)return;let d;return r.some(m=>{if(m.items.some(p=>{if(p.component===l)return d=p.label,!0}),d)return!0}),d},[r,s]),o=c.exports.useCallback((l,d)=>{a(l),vt([d])},[s,a]);return s!=null&&s.length?e(ae,{children:s.map(l=>{var d;return e(so,{imgSrc:l.image,name:((d=l.label)==null?void 0:d.toLowerCase())!=="null"?l.label:void 0,price:l.price,categoryName:n(l.component_id),onRemoveClick:()=>o(l.id,l.component_id),isUnset:l.isUnset},l.id)})}):i("div",{className:"flex h-min min-h-20 w-full animate-pop-in flex-col items-center justify-center gap-2 rounded-md bg-primary-dark-opacity px-4 py-6 text-text",children:[e("h3",{className:"text-base font-medium",children:t("shopping_cart.empty_title")}),i("div",{className:"flex flex-col items-center justify-center gap-4 text-center text-sm",children:[e("p",{dangerouslySetInnerHTML:{__html:t("shopping_cart.empty_description",{preview:`<span class="font-bold">${t("shopping_cart.empty_preview")}</span>`,add:`<span class="font-bold text-green-500">${t("shopping_cart.empty_add")}</span>`})}}),e("div",{className:"aspect-square w-fit rounded-full border border-primary-opacity bg-primary-dark p-2",children:i("div",{className:"relative",children:[e(Me,{className:"absolute left-0 top-0 size-6 animate-ping-short stroke-1 text-green-500"}),e(Me,{className:"size-6 text-green-500"})]})})]})]})},ao=({isSaveAsOutfit:t,setSaveAsOutfit:r,outfitName:s,setOutfitName:a,disabled:n})=>{const{t:o}=H();return i("div",{className:"flex w-full flex-col items-center gap-2 py-2 text-white",children:[e(Fe,{id:"saveAsOutfit",name:"saveAsOutfit",checked:t,onCheckedChange:l=>{a(""),r(!!l)},disabled:n,label:o("shopping_cart.save_as_outfit")}),t&&e(_e,{className:"w-full",name:"outfitName",value:s,onChange:l=>a(l.target.value),placeholder:o("shopping_cart.save_as_outfit_placeholder")})]})},no=()=>{var h,S;const{t}=H(),{isCheckoutLoading:r,shopData:s}=J(),{items:a,clearCart:n}=me(),[o,l]=c.exports.useState(!1),[d,m]=c.exports.useState(""),u=(h=s==null?void 0:s.modifiers)==null?void 0:h.IS_EVERYTHING_FREE,p=(S=s==null?void 0:s.modifiers)==null?void 0:S.DISABLE_OUTFIT_SAVING,g=t(u?"shopping_cart.title_free":"shopping_cart.title_cart"),v=r||!a.length||o&&!(d!=null&&d.length),b=r||o&&!(d!=null&&d.length),f=p||r||!a.length;return i("div",{className:"relative flex h-full w-full animate-pop-in flex-col space-y-4 overflow-hidden",children:[e("div",{className:"pr-1",children:i("div",{className:"radius-md flex w-full shrink-0 items-center justify-between rounded-md border border-border bg-primary-dark-opacity p-3 text-right",children:[e("div",{className:"flex shrink-0 justify-center pr-1",children:e(T,{onClick:()=>n(),className:"rounded-md border border-border bg-primary-dark-opacity p-2 text-white transition-all hover:bg-primary-dark",disabled:v,children:e(Ve,{className:"size-5 text-red-500"})})}),e("h2",{className:"text-fill whitespace-break-spaces bg-gradient-text bg-clip-text text-lg font-extrabold uppercase leading-normal text-transparent drop-shadow-lg",children:g})]})}),e("div",{className:"flex-grow space-y-2 overflow-y-auto pr-1 scrollbar-thin",children:e(ro,{})}),i("div",{className:"radius-md flex w-full shrink-0 flex-col items-center justify-end gap-4 rounded-md border border-border bg-primary-dark-opacity p-3",children:[!p&&e(ao,{isSaveAsOutfit:o,setSaveAsOutfit:l,setOutfitName:m,disabled:f,outfitName:d}),e(to,{disableCheckout:v,disableConfirm:b,outfitName:d,saveAsOutfit:o})]})]})},oo=()=>{const{setTranslations:t,setIsLoading:r,setAvailableArms:s,setCharFeaturesPrices:a,setIsNumeralMode:n,setIsIdModeOpenByDefault:o}=J();return{setInitData:d=>{r(!0);const{translations:m,arms:u,charFeaturesPrices:p,idModeEnabled:g}=d;m&&t(m),u&&s(u),p&&a(p),g&&(n(!0),o(!0)),r(!1)}}},io=1,lo=1e6;let gt=0;function co(){return gt=(gt+1)%Number.MAX_SAFE_INTEGER,gt.toString()}const bt=new Map,Vt=t=>{if(bt.has(t))return;const r=setTimeout(()=>{bt.delete(t),Ie({type:"REMOVE_TOAST",toastId:t})},lo);bt.set(t,r)},mo=(t,r)=>{switch(r.type){case"ADD_TOAST":return{...t,toasts:[r.toast,...t.toasts].slice(0,io)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===r.toast.id?{...s,...r.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=r;return s?Vt(s):t.toasts.forEach(a=>{Vt(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==r.toastId)}}},Ke=[];let Ze={toasts:[]};function Ie(t){Ze=mo(Ze,t),Ke.forEach(r=>{r(Ze)})}function uo({...t}){const r=co(),s=n=>Ie({type:"UPDATE_TOAST",toast:{...n,id:r}}),a=()=>Ie({type:"DISMISS_TOAST",toastId:r});return Ie({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:n=>{n||a()}}}),{id:r,dismiss:a,update:s}}function rr(){const[t,r]=c.exports.useState(Ze);return c.exports.useEffect(()=>(Ke.push(r),()=>{const a=Ke.indexOf(r);a>-1&&Ke.splice(a,1)}),[t]),{...t,toast:uo,clearAllToasts:()=>Ie({type:"DISMISS_TOAST"}),dismiss:a=>Ie({type:"DISMISS_TOAST",toastId:a})}}const po=(t="dark")=>{const r=window.appConfig.themes[t];if(r){const s=document.documentElement.style;for(const[a,n]of Object.entries(r))s.setProperty(`--color-${a}`,n)}},fo=()=>{var O,q;const{userConfig:t,setUserConfig:r,setMenuData:s,setShopData:a,setClothingCategories:n,setMenuFirstLevelSelected:o,setMenuSecondLevelSelected:l,menuSecondLevelSelected:d,menuFirstLevelSelected:m,setHairData:u,setServerJobs:p,isCheckoutLoading:g,setInitPedData:v,isNumeralMode:b,setCurrentPedData:f,shopData:h,setPermissions:S,isIdModeOpenByDefault:k,currentPedData:x}=J(),{t:_}=H(),{clearCart:j,items:I}=me(),[D,F]=c.exports.useState(!1),{getComponentId:z,isOutfitFirstLevel:C}=Et(),{toast:A}=rr(),{setInitData:G}=oo(),{isAdminMode:R,resetAdminMode:X}=Ge(),[K,se]=c.exports.useState(!1),[re,y]=c.exports.useState(!1),P=re&&!b,$=(O=h==null?void 0:h.modifiers)==null?void 0:O.CAN_NOT_BE_CLOSED;Q("isUIReady",()=>w("uiReady")),Q("setInitData",G),Q("setInitPedData",v),Q("setCurrentPedData",f);const te=()=>{o(null),l(null),j(!0),X(k),F(!1)};Q("open",()=>{te(),se(!0)}),Q("close",()=>{te(),se(!1)}),Q("setMenuData",s),Q("setClothingCategories",n),Q("setShopData",a),Q("setPermissions",S),Q("setHairData",u),Q("setServerJobs",p),Q("notify",U=>{A({title:U.title,description:U.message,variant:U.isError?"destructive":"default",duration:1e4})});const M=()=>{if(I.length){F(!0);return}w("close")};c.exports.useEffect(()=>{(async()=>{var le;const ee=await Na(),ue=ee.activeTheme&&((le=ee.themes)==null?void 0:le[ee.activeTheme])?ee.activeTheme:"dark";po(ue),r(ee)})()},[]),c.exports.useEffect(()=>{if(K){const{characterSettingsId:U,componentId:L}=z();w("onComponentChange",{componentId:L,characterSettingsId:U,pedModel:x==null?void 0:x.pedModel})}},[d]),c.exports.useEffect(()=>{K&&Ue(I)},[m,d]);const B=U=>{["Escape"].includes(U.code)&&(et()?console.log("Not in NUI, cannot close"):M())};return c.exports.useEffect(()=>{if(!!K)return window.addEventListener("keyup",B),()=>window.removeEventListener("keyup",B)},[K,I]),t?e(ae,{children:i("div",{className:"dark flex h-full w-full bg-gradient-bg font-main",style:et()?{backgroundImage:"url(img/player_bg.webp)",backgroundSize:"cover",backgroundPosition:"center"}:{},children:[e(ln,{}),e(eo,{}),e(on,{isOpen:D,onClose:()=>F(!1)}),e(Ut,{in:K,timeout:100,classNames:"fade",unmountOnExit:!0,children:i("div",{className:"flex flex-grow justify-between overflow-hidden",children:[e("div",{className:N("w-full max-w-[400px] shrink-0 p-8 transition-opacity 2xl:max-w-[750px]",{"pointer-events-none opacity-60":g}),children:e(Zn,{onNumeralModeChange:y})}),e("div",{className:"w-full py-8",children:i("div",{className:"relative h-full w-full",children:[e(Za,{currentComponent:(q=z())==null?void 0:q.componentId}),e(nn,{forceNumeralMode:P})]})}),e("div",{className:N("flex w-full max-w-[400px] shrink-0 flex-col p-8",{"w-fit":R?!1:C}),children:i("div",{className:"flex h-full flex-col gap-y-3",children:[!$&&i("div",{className:"flex items-center justify-end gap-2 pr-1",children:[e("span",{className:"text-sm font-medium text-white",children:_("press_to_exit")}),e("button",{onClick:M,className:"aspect-square rounded-md bg-error p-2 transition-colors hover:bg-error-hover",children:e(Oe,{className:"size-5 text-white"})})]}),R?e(Va,{}):!C&&e(no,{})]})})]})})]})}):null};const ho=(t,r)=>t?"Validating photos":r?"Manual photo mode":"Photo mode",go=(t,r)=>t?"Validating addon photos, be patient, this may take a while.":r?"Use mouse and WASD to position the camera and press Space to take photo.":"Taking addon photos, be patient, this may take a while.",bo=t=>t?"This step can't be stopped. If it crashes, it can continue when started again unless the script/server was restarted.":"After stopping, you can run the step again to continue.",xo=({})=>{const[t,r]=c.exports.useState(!1),[s,a]=c.exports.useState(0),[n,o]=c.exports.useState(0),[l,d]=c.exports.useState(!1),[m,u]=c.exports.useState(!1),[p,g]=c.exports.useState(!1);Q("displayPipelineStatus",b=>{r(!0),a(0),o(b.total||0),u(b.isFreeCam||!1),g(b.isSoftBlacklist||!1)}),Q("hidePipelineStatus",()=>{r(!1),a(0),o(0),u(!1),g(!1)}),Q("updatePipelineStatus",b=>{a(b||0),d(!1)}),Q("showPipelineStatusIsInvisible",()=>d(!0));const v=()=>{w("pipeline2forceStop")};return t?e("div",{className:"bg-pipeline-bg absolute left-0 top-0 flex h-full w-full font-main",children:i("div",{className:"absolute bottom-8 right-8 z-50 w-64 space-y-2",children:[l&&i("div",{className:"radius-md flex items-center gap-2 rounded-md border border-border bg-primary-dark-opacity p-4 py-2 text-sm text-text",children:[e(Qt,{className:"size-4 shrink-0 text-warning"}),e("p",{className:"text-xs",children:"Skipping invisible clothing. Don't worry if there's many, it's normal."})]}),i("div",{className:"radius-md flex flex-col gap-4 rounded-md border border-border bg-primary-dark-opacity p-4 text-text",children:[i("div",{className:"flex flex-col gap-2",children:[i("div",{className:"flex items-center gap-2",children:[e(Jr,{className:"size-6"}),e("h2",{className:"mb-0 text-lg font-semibold",children:ho(p,m)})]}),e("p",{className:"text-xs",children:go(p,m)}),i("div",{className:"space-y-1",children:[i("div",{className:"flex justify-between",children:[e("span",{className:"text-sm font-medium",children:"This batch"}),e("span",{className:"text-right text-sm font-medium",children:"Total left"})]}),i("div",{className:"flex gap-2",children:[i("div",{className:"basis-1/2 rounded-md border border-border bg-primary-opacity px-2 py-1 text-right text-sm",children:[e("span",{className:"font-semibold",children:s})," /"," ",e("span",{className:"text-text-mute",children:n>50?50:n})]}),e("div",{className:"basis-1/2 rounded-md border border-border bg-primary-opacity px-2 py-1 text-right text-sm",children:e("span",{className:"text-text-mute",children:n})})]})]})]}),i("div",{className:"flex flex-col gap-2",children:[e("p",{className:"text-xs",children:bo(p)}),!m&&!p&&e(T,{variant:"destructive",onClick:v,children:"Stop"})]})]})]})}):null},vo=va,ar=c.exports.forwardRef(({className:t,...r},s)=>e(_s,{ref:s,className:N("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r}));ar.displayName=_s.displayName;const yo=Ct("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-slate-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-slate-800",{variants:{variant:{default:"border-border bg-primary-dark text-text dark:bg-slate-950 dark:text-slate-50",destructive:"destructive group border-error-border bg-error text-slate-50"}},defaultVariants:{variant:"default"}}),nr=c.exports.forwardRef(({className:t,variant:r,...s},a)=>e(Cs,{ref:a,className:N(yo({variant:r}),t),...s}));nr.displayName=Cs.displayName;const No=c.exports.forwardRef(({className:t,...r},s)=>e(ks,{ref:s,className:N("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-slate-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-slate-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-slate-50 group-[.destructive]:focus:ring-red-500 dark:border-slate-800 dark:ring-offset-slate-950 dark:hover:bg-slate-800 dark:focus:ring-slate-300 dark:group-[.destructive]:border-slate-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-slate-50 dark:group-[.destructive]:focus:ring-red-900",t),...r}));No.displayName=ks.displayName;const or=c.exports.forwardRef(({className:t,...r},s)=>e(Ss,{ref:s,className:N("text-text absolute right-2 top-2 rounded-md p-1 transition-opacity focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-slate-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:e(Oe,{className:"h-4 w-4"})}));or.displayName=Ss.displayName;const ir=c.exports.forwardRef(({className:t,...r},s)=>e(Is,{ref:s,className:N("text-sm font-semibold",t),...r}));ir.displayName=Is.displayName;const lr=c.exports.forwardRef(({className:t,...r},s)=>e(Es,{ref:s,className:N("text-sm opacity-90",t),...r}));lr.displayName=Es.displayName;function wo(){const{toasts:t,clearAllToasts:r}=rr();return Q("close",()=>{r()}),i(vo,{children:[t.map(function({id:s,title:a,description:n,action:o,variant:l,...d}){return i(nr,{variant:l,...d,className:"mb-2",children:[i("div",{className:"grid gap-1",children:[a&&i(ir,{className:"flex items-center gap-1",children:[l==="default"&&e(Ee,{size:"1.2rem"}),l==="destructive"&&e(Wr,{size:"1.2rem"}),a]}),n&&e(lr,{children:n})]}),o,e(or,{})]},s)}),e(ar,{})]})}const _o=c.exports.createContext(null),Co=({children:t,className:r,visibleEventName:s="setVisible"})=>{const[a,n]=c.exports.useState(!1);return Q(s,n),e(_o.Provider,{value:{visible:a,setVisible:n},children:e("div",{className:r,style:{display:a?"block":"none",height:"100%"},children:t})})},ko={...console,assert:function(){}};window.console=ko;Cr.createRoot(document.getElementById("root")).render(e(wa,{children:i(Ca,{children:[e(Co,{children:e(en,{delayDuration:100,children:e(fo,{})})}),e(xo,{}),e(wo,{})]})}));
